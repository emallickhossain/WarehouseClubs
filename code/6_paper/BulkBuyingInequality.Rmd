---
title: "Bulk Buying and Inequality"
author: "E. Mallick Hossain"
date: "`r format(Sys.time(), '%B %d, %Y')`"
output:
  pdf_document:
    number_sections: yes
bibliography: reference.bib
fig_caption: true
citation_package: natbib
fontsize: 8pt
geometry: margin=0.5in
header-includes:
  - \usepackage{setspace}
  - \onehalfspace
  - \usepackage[utf8]{inputenc}
  - \usepackage{amssymb}
  - \usepackage{amsmath}
  - \usepackage{bbm}
  - \usepackage[multiple]{footmisc}
  - \usepackage[nolists, noheads]{endfloat}
  - \renewcommand{\efloatseparator}{\mbox{}}
  - \usepackage{caption}
  - \captionsetup[figure]{labelsep=space}
  - \captionsetup{font=small,skip=0pt}
  - \usepackage{multirow}
  - \usepackage{longtable}
---
 
\newcommand\blfootnote[1]{%
  \begingroup
  \renewcommand\thefootnote{}\footnote{#1}%
  \addtocounter{footnote}{-1}%
  \endgroup
}

\begin{abstract}
\singlespace
Buying in bulk is a common way to save money, especially for storable items like toilet paper. Using granular household shopping data, I find that households making over \$100k buy 30\% larger packages than households making less than \$25k. Furthermore, the relationship between quantity purchased and income is monotonically increasing. I estimate that low-income households spend 6\% more for the same quantity than they would if they made larger per-trip purchases. By highlighting the importance of budget constraints and storage costs, this research identifies key structural factors that contribute to the "poverty penalty". Given the prevalence of bulk discounts, this research suggests that quantity discounts contribute to consumption inequality and may affect how we measure prices faced by different socio-economic groups. This research implies that reducing budget constraints would help low-income households achieve lower spending for the same basket of goods because they could buy larger quantities at lower unit costs.
\end{abstract}

\blfootnote{I wish to thank my wonderful advisers, Aviv Nevo, Holger Sieg, Katja Seim, and Sarah Moshary for their sound advice, constructive criticism, and immense patience throughout this writing process. They are prized mentors. I would also like to thank Emek Basker, Chris Cronin, Frank DiTraglia, Jim Ferry, Ishan Ghosh, Joao Granja, Paolo Martellini, and Paul Sangrey for their comments, questions, and extensive discussions on this topic which have helped to significantly improve this paper. Researcher(s) own analyses calculated (or derived) based in part on data from The Nielsen Company (US), LLC and marketing databases provided through the Nielsen Datasets at the Kilts Center for Marketing Data Center at The University of Chicago Booth School of Business. The conclusions drawn from the Nielsen data are those of the researcher(s) and do not reflect the views of Nielsen. Nielsen is not responsible for, had no role in, and was not involved in analyzing and preparing the results reported herein.}

# Introduction
Households have a variety of available options when trying to save money on common household purchases like groceries and general merchandise. They can clip coupons, search for lower prices, wait for sales, buy cheaper brands, or buy in bulk. Each of these options requires a different trade-off to achieve savings. Search strategies (coupons, sales, etc.) require households to spend time in exchange for lower prices. Brand substitution requires households to possibly sacrifice quality for savings. Both of these strands of strategies have been extensively studied. However, consumer behavior in response to bulk discounts has received less attention, especially for storable items where actual consumption may not respond strongly to lower prices. The trade-off required for a bulk discount is less obvious than for sales or brand substitution. On one hand, any forward-looking, expenditure-minimizing households with reasonable expectations of their own demand would purchase the package that delivers the lowest unit cost (i.e. the largest package). However, given that we do not see consumers pool on the largest size, what frictions could generate this pattern? One possibility is budget constraints. A bulk discount requires an upfront investment in exchange for future savings. The other friction could be storage or transportation costs. Buying a large quantity requires having the means to transport and store a large quantity. 

As mentioned above, given the relatively low price of common household goods, relative to other expenses, a rational agent would appropriately save and spend to achieve the lowest unit cost of these items. Low-income households would be especially sensitive to reaping any potential savings because the marginal dollar is much more valuable to them than to a higher-income counterpart. Therefore, economic intuition would identify storage and transportation costs as the driving factor for why some households cannot buy bulk quantities.^[Informal conversations have suggested as much. With few exceptions, economists I have talked to inevitably identify storage costs as the main driver of why consumers do not buy in bulk while non-economists tend to identify budget constraints as the main driver. This paper will help pin down the relative importance of these competing explanations.]

This paper find that high-income households are more likely to take advantage of bulk discounts compared to similar low-income households. For toilet paper purchases, households making over \$100k purchase almost 30\% larger packages compared to households making below \$25k. As a result, these high-income households realize a 7\% savings over their low-income counterparts simply as a result of buying in bulk. 

Previous research has specifically analyzed how households substitute between brands and take advantage of sales [@argente2017, @erdem2003, @hendel2006a, @hendel2006b, @hendel2013, @pesendorfer2002]. @nevo2018 explore how the propensity to take advantage of these savings changed during the Great Recession. However, most research assumes that unit costs are uniform for a particular product and households choose quantities given a fixed unit price. In reality, this is not true because unit costs differ with package size and larger packages offer lower unit costs. Aside from @nevo2009 and @nevo2018, few papers have looked specifically at bulk discounts as a money-saving technique.

The closest paper to this one is @orhun2018 which documents differences in purchase behavior between high- and low-income households. By comparing spending patterns at the beginning and end of a month, they find that liquidity constraints are an important reason why low-income households cannot take advantage of sales. However, they also look at bulk purchasing, but they find that low-income households do not take advantage of bulk purchases even when they have more money at the beginning of a month. The precise cause of this gap remains elusive. Budget constraints could still be a factor, but the difference between liquidity at the start and the end of the month is still not enough to make the up-front investment necessary for a bulk purchase. The other explanation is that storage and transportation costs are the primary factors, so even with extra room in their budget, households have no place to keep a bulk quantity. 

This paper contributes to the literature by explicitly incorporating how a household's purchase decision may depend on both a product's price and its size and how these preferences may relate to demographic characteristics.

This paper documents three stylized facts:

1. Households making over \$100k purchase 29\% larger packages of toilet paper compared to households making less than \$25k. 
2. The relationship between household income and quantity purchased is monotonically increasing in income.
3. Due to bulk discounts, households making over \$100k save 7\% annually compared to frequently buying small packages like low-income households do. 

Overall, this paper quantifies the "poverty penalty" paid by poor households that results from them being unable to take advantage of the same discounts that rich households can. This is particularly stark when examining necessity goods for which total consumption is fixed and relatively predictable. Over the course of a year, rich and poor households purchase the same amount of toilet paper, but have significantly different expenditure paths, which ends up costing low-income households more. This paper provides evidence and analysis to explain these patterns.

# Data

## Nielsen Consumer Panel Data
I use the Nielsen Consumer Panel Dataset from 2006--2016 available through the Kilts Center for Marketing at the University of Chicago Booth School of Business. This data is a longitudinal panel of between 40,000-60,000 households which record all purchases from any outlet intended for personal, in-home use. Products can be characterized as household non-durables such as groceries, cleaning supplies, health/personal care items, and basic general merchandise. The dataset contains about 30\% of consumer expenditures. About 1.5 million unique items (defined by UPC code) are present in the data. The panel is based on a stratified, proportionate sample designed to be projectable to the United States population. It is balanced on demographic characteristics including household size, income, education, children, race, and occupation. 

Households are provided a scanner with which they scan all items that they purchase, input quantities and prices (if necessary), date of purchase, and store purchased from. Households are incentivized to stay active in the panel by monthly prize drawings, points for data transmission, and sweepstakes as well as ongoing communication from Nielsen to ensure cooperation and address any problems. Nielsen retains about 80% of its panel from year to year with the mean and median tenure of a household being 4 and 3 years, respectively. To further ensure data quality, Nielsen institutes a minimum purchase threshold based on household size that must be met to be deemed "active".

For my analysis, I remove any households where the head of household is in the military to avoid instances where store choice may be limited (e.g. all shopping is on a military base) or students where shopping choices may be different than a typical household (e.g. a meal plan and dormitory housing with various amenities). 

In order to examine effects related to the value of bulk purchasing that is separate from immediate consumption, this analysis focuses on a product that is storable, non-perishable, and universal in consumption, namely, toilet paper. While this research focuses on toilet paper consumption, its conclusions are generalizable to overall household consumption, toilet paper provides the cleanest product by which to conduct this analysis. Based on CPI basket weights, storable, non-perishable items account for about 2-5\% of total expenditures and about 10-23\% of nondurable expenditures.^[See Appendix for items and basket shares.] All of the analysis that follows is done on the subset of toilet paper purchases in my Nielsen data. My sample includes about 3.7 million observations across 120,000 households between 2006 and 2016. 

Data cleaning and organization follow @orhun2018 and take efforts to identify and remove missing purchase information and incorrectly recorded values, which help address concerns raised in @einav2010. Further details are in the Data Appendix.

Of the many brands of toilet paper sold each year, I focus on the top 5 "brands" (Angel Soft, Charmin, Cottonelle, Quilted Northern, and Scott 1000) which account for over 60\% of purchases.^[A "brand" is defined by the name borne on the product. This is a slightly finer gradation than might be commonly expected in that Charmin and Charmin Essentials are different "brands" as are Scott 1000 and Scott Extra Soft.] Private-label products account for about 25\% of sales with the remainder composed by a long tail of other brands. The average prices and bulk discounts for the top 5 brands are in Table \ref{tab:bulkDiscountTable}:

\input{./tables/bulkDiscountTable.tex} 

Overall, we see that bulk discounts can be substantial, but require a much larger investment. Increasing purchase size from a 4 to a 6-roll package does not net much savings, but further increasing to a 12-roll package does generate substantial unit cost savings. 

Table \ref{tab:sizeSummary} shows the positive correlation in the raw data between income and package size purchased. As will be shown in the following section, this correlation is robust to controlling for a wide range of household characteristics as well as brand and store preferences.

\input{./tables/sizeSummary.tex}

## Nielsen Retail Scanner Data
I also use Nielsen's Retail Scanner Data in order to estimate a discrete choice model. The Nielsen Retail Scanner Data contains weekly pricing, volume, and promotional activity of about 35,000 stores from about 90 retail chains and covers 2006-2016. Each store in the panel reports their weekly quantity sold as well as the weighted average unit price. For a subset of stores, they also report their promotional activity (i.e. if a product was featured or on display). This data is essential to match a consumer's purchase decision with the product assortment they faced when making their decision. I am able to match the Retail Scanner Data with the Consumer Panel data based on store identification numbers that correspond to an individual store location and the week of the purchase. Overall, I am able to match about 30\% of purchases to stores. This is in line with Nielsen estimates of matching between the two datasets. This primarily results from the fact that Nielsen only has data-sharing agreements with about 35,000 stores in 90 retail chains and households may shop at stores that do not share their data with Nielsen.

Since the Retail Scanner Data only records information on products that have positive sales, I cannot between a product was available and did not sell or a product that was unavailable. To pin down a consumer's choice set, I assume that only products with positive sales are in their choice set. Additionally, there are cases where a household records a purchase, but a corresponding sale is not found in the Scanner data. In these instances, I append the "missing" purchase to the store's sales in order to create the consumer's choice set. Further data organization details are in the Data Appendix.

# Descriptive Evidence

## Average Daily Consumption
One important characteristic of toilet paper that I use in this analysis is that consumption is relatively fixed by household and that increased package size purchases by high-income households do not reflect increased consumption. Furthermore, unlike other goods, consumption cannot be inter-temporally shifted and there is little scope for home production to substitute for this product. This should be intuitive from a biological perspective in that characteristics like household size and the presence of children should be most predictive of consumption, but not income. 

In order to verify this, I first compute average daily consumption by computing the total volume of toilet paper purchased by a household, excluding the final purchase, and divide that by the number of days they were active in the panel. I then regress this household-specific consumption rate on household demographics to identify the most significant predictors. These results are in Table \ref{tab:annualTP}. As an alternative validation, I use machine-learning (namely, 20-fold cross-validated LASSO) to identify the most useful predictors of consumption. LASSO is a method that identifies the most predictive subset of covariates in a regression and shrinks other coefficients to 0. Both analyses are detailed in the Appendix.

## Stylized Facts
I document 2 stylized facts to motivate my analysis:

1. Households making over \$100k purchase 29\% larger packages than households making under \$25k.
2. Quantity discount savings are significant and substantial, a 10\% increase in package size reduces the unit price by 2\%.

Combining these facts together, I calculate that low-income households spend 6\% more over the course of a year because they do not take advantage of bulk discounts at the same rate as high-income households even after accounting for their consumption rate.

## Purchase Quantities
I find that high-income households purchase larger quantities than low-income households by estimating the following regression:

\begin{equation}
\label{eq:size}
Y_{ikrbmt} = \beta Inc_{imt} + \gamma X_{imt} + \lambda_r + \lambda_b + \lambda_m + \lambda_t + \epsilon_{imt}, 
\end{equation}

where $Y$ is the log standardized quantity purchased made by household $i$ on shopping trip $k$ at retailer $r$ of brand $b$ in market $m$ at time $t$.^[Packages are standardized to be in units of 225 sheet 2-ply rolls. Because private-label products have the same brand code in the Nielsen data, I recode the private label brand to correspond to a brand-retailer to better control for potential quality differences. As an illustration, this ensures that Great Value (Walmart brand) is distinct from Kirkland Signature (Costco brand).] $Inc$ is the household income quantile and $X$ is a vector of other household characteristics including household size, type of residence, marital status, race, ethnicity, age, and education. $\lambda$ are fixed effects.

Column 1 of Table \ref{tab:packageSizeFullTP} shows that high-income households (those making over \$100k) purchase packages that are about 27\% larger than those purchased by the lowest-income households (those making under \$25k), even after accounting for household demographics. This coefficient remains stable even after controlling for a household's consumption rate (Column 2). After accounting for store choice, the income coefficient decreases substantially (Column 3), but is still substantial and significant at 11\%. Furthermore, purchase quantity is still increasing in household income. Column 4 adds brand fixed effects, and the coefficient on income remains stable. Richer households are more likely to buy larger quantities Somewhat surprisingly, Figure \ref{fig:coefficients} shows that even at finer income gradations, this pattern is monotonically increasing. Overall, these patterns suggest that there are multiple contributing factors to the decision to buy in bulk. Store choice is clearly an important factor, but I abstract away from that in this paper because there are many other factors such as shopping needs and geography that also affect this decision. I focus on the more puzzing within-store, within-brand purchase decision that is directly correlated to income. Put more succinctly, it is surprising that even for households within the same store, choosing the same brand, there is a quantity difference that is correlated with income.

\input{./tables/packageSizeFullTp.tex} 

\begin{figure}
\centering
\includegraphics{../5_figures/tpCoefficients.png}
\caption{}
\label{fig:coefficients}
\end{figure}

## Bulk Discounts
After establishing this stark difference in quantity choice, I estimate the magnitude of bulk discounts using the following regression:

\begin{equation}
\label{eq:discount}
log(P)_{krbmt} = \beta log(Q)_{krbmt} + \lambda_r + \lambda_b + \lambda_m + \lambda_t + \epsilon_{krbmt},
\end{equation}

where $P$ is the unit price paid on shopping trip $k$ at retailer $r$ of brand $b$ in market $m$ at time $t$.^[Packages are standardized to be in units of 225 sheet 2-ply rolls.] $\lambda$ are fixed effects.

Table \ref{tab:bulkDiscountUnitCost} shows that overall, the bulk discount is such that a 1\% increase in the package size decreases the unit cost by 0.25\%. After accounting for brand and retailer differences, the bulk discount is lessened, but still substantial at 0.19\%. 

\input{./tables/bulkDiscountUnitCost.tex} 

One possible criticism is that this measure of the bulk discount is conditional on a household making a purchase and does not reflect the actual pricing behavior of stores. In order to ensure that this is a good approximation for actual pricing behavior, I run a similar regression on the Retail Scanner data. I modify the fixed effects to account for the store-level data I have and I include store, brand, and week fixed effects to isolate the bulk discounting available within a store and the results are strikingly similar to the bulk discounts reflected in the Consumer Panel. Both of these regressions reveal that a large amount of price variation is due to brand, with some remainder attributable to store or time.

\input{./tables/bulkDiscountScanner.tex}

## Estimated Savings
Combining together the differences in package sizes purchased and the estimated bulk discounts, we calculate that low-income households could reduce their unit costs and therefore their overall expenditures by about 6\%. 

I get a similar estimate from running the following regression as well, which provides suggestive evidence that high-income households are able to obtain similar standardized sizes at a lower unit cost.

\begin{equation}
\label{eq:savings}
log(P)_{ikrbmt} = \beta_1 Log(Q)_{krbmt} + \beta_2 Log(Q)_{krbmt} * Inc_{imt} + \gamma X_{imt} + \lambda_r + \lambda_b + \lambda_m + \lambda_t + \epsilon_{imt}, 
\end{equation}

where $P$ is the log unit price paid by household $i$ on shopping trip $k$ at retailer $r$ of brand $b$ in market $m$ at time $t$. $Q$ is the number of standardized rolls purchased. $Inc$ is the household income quantile and $X$ is a vector of other household characteristics including household size, type of residence, marital status, race, ethnicity, age, and education. $\lambda$ are fixed effects. 

The $\beta_2$ coefficients are plotted in Figure \ref{fig:unitCostCoef}. These coefficients show a steady negative relationship between household income and the unit price paid by a household starting once a household makes above \$25k and decreasing to a 6\% reduction in unit costs for the same size package after controlling for a wide range of both household demographics as well as various fixed effects.

\begin{figure}
\centering
\includegraphics{../5_figures/IncUnitCost.png}
\caption{}
\label{fig:unitCostCoef}
\end{figure}

# Model

The above descriptive analysis suggests some underlying factor that is contributing to the positive relationship between income and package size. However, the mechanism or causal factor remains elusive. Even @orhun2018 provides limited evidence that liquidity constraints are the cause of this difference. The most likely explanations rest on some combination of budget constraints and storage/transportation costs. In order to assess the relative importance of these factors, I estimate a multinomial logit model that incorporates various product characteristics that could explain this difference. This will then be extended to account for observed household heterogeneity and then further expanded to incorporate unobserved heterogeneity through a general random coefficients model.

## Multinomial Logit
I start by estimating a multinomial logit model which will provide the intuition and the basic aggregate-level patterns. However, given the well-known restrictions of multinomial logit, I will extend this model to incorporate observed and unobserved household-level heterogeneity. 

### Products
I define a product as a brand-size combination. I define a "brand" as a "brand code" as reported in Nielsen. This refers to the label on the product and provides slightly finer distinctions than what is typically considered a "brand". For example, Scott 1000 and Scott Extra Soft are separate "brands" even though they are both manufactured by Scott.^[The quality of this subdivision can vary by brand. While Charmin is also subdivided, there are finer gradations not immediately picked up by the brand (e.g. their Ultra Soft and Ultra Strong lines are both under the Charmin "brand"). This will generate some noise when I aggregate UPCs into products. This can be addressed by more finely defining a product.] I focus on the top 5 brands in this space, which account for about two-thirds of total volume purchased with another quarter being made up by private-labels and the remainder being composed of the long-tail of other brands. In order to capture variation in physical package size, aggregate packages into *small* (1-6 rolls), *medium* (7-12 rolls), and *large* (12+ rolls).^[While there are a range of sizes offered, most packages are 4-, 6-, 12-, or 24-roll packages. This categorization appropriately separates these popular sizes while also incorporating other, less popular sizes. It also captures the main focus of package size, namely it being the primary driver of storage and transportation costs.] 

### Utility

A household makes a shopping trip to a store in which they purchase a package of toilet paper.^[In over 85\% of shopping trips, households only purchase 1 package, so a discrete choice model is appropriate for this setting. Households purchasing 2 packages make up the majority of remaining purchases. This could be addressed in one of two ways. We could modify the choice set to include 2-package products. The other option is to treat my estimates as an upper bound on price sensitivity. Because of bulk discounts, purchasing multiple packages is weakly more expensive than the equivalent larger package. One other fact is that in 98\% of trips, a single UPC is purchased.] The household's choice set consists of all products with positive sales at the store they visit during the week of their visit. This is obtained by matching consumer panel data with retail scanner data at the store-week level.

Households ($i$) choose the product ($j$) that maximizes their utility, which I represent as the following:

\begin{equation}
U_{ij} = \alpha unitCost_j + \beta packSize_j + \gamma q_j + \theta_{b(j)} + \epsilon_{ij}
\end{equation}

where $U_{ij}$ represents the utility that household $i$ gets from product $j$. $unitCost$ is the unit cost (in units of standardized rolls).^[Recall that I define a "standard roll" as a 225-sheet, 2-ply roll.] $packSize$ consists of dummies for small/medium/large package sizes. $q$ represents the quantity (in units of standardized rolls) in product $j$. $\theta$ is a brand fixed effect. $\epsilon_{nj}$ is an error term drawn from a Type I Extreme Value distribution. The error term structure and model give us a closed form for the choice probabilities. From these choice probabilities, the parameters can then be estimated using MLE.

### Identification Strategy
Somewhat surprisingly, this model is identified only using data on product shares and prices. In particular, a careful reader might be worried that $\beta$ and $\gamma$ cannot be separately identified from aggregate shares.^[@cohen2008 asserts as much about his data on paper towels on p. 506 "Given [aggregate] data, however, it would not be possible to identify [preferences for different amounts of the product] separately from the distribution of package size preferences." He circumvents this issue by assuming that consumers use the same quantity in a given quarter, effectively shutting down heterogeneity in product consumption. Given that toilet paper is in a similar product class as paper towels, I could make this assumption. I choose not to because I want to fully leverage market-level data to get aggregate population preferences and then leverage household-level variation to estimate heterogeneity based on unobservables.] This is not normally the case, especially given the characteristics entering the utility function, so this requires justification. Some of this identification comes from the simplicity and assumptions of the model, but some is only possible because of unique product features of toilet paper. The identification strategy is subtle. 

First, the primary objects of this study are $\alpha$ and $\beta$ because these reflect  preferences over price and physical size, which ultimately is the tradeoff being made when consumers are choosing whether to buy in bulk or not. Brand does not enter when buying in bulk because size differences are within a particular brand.

I will start by outlining the intuition of model construction and then address identification concerns. If my objects of interest are only $\alpha$ and $\beta$ why are quantity and brand included? Their inclusion stems from serious omitted variable bias concerns. First, brand is often correlated with price and it is likely correlated with choice. For a popular premium brand like Charmin, its brand is positively correlated with both price and choice. Therefore, excluding it would push the (negative) price coefficient towards zero and we would underestimate price sensitivity. Directly including brand effects will address this source of bias. 

What about the product quantity (in standardized rolls)? Its inclusion also stems from the need to address omitted variable bias. In particular, quantity is negatively correlated with unit cost and likely ambiguously correlated with choice. If households prefer to have more toilet paper on hand as opposed to less, then we will overestimate the unit cost coefficient. Otherwise, it will be pushed to zero. To combat this bias, we include a quantity measure as well.

One risk of incorporating these additional variables is that we may have introduced multicollinearity between package size and quantity. Surprisingly, while these measures are positively correlated as one would expect, they are not so strongly correlated to induce strong multicollinearity. This is due to the fact that there is substantial variation in quantity across brands within a particular package size. As an example, a 6-pack of Scott 1000 and Charmin are roughly the same size. However, the Scott 1000 is 1000 sheets of single-ply toilet paper while Charmin is 196 sheets of 2-ply toilet paper. The variation in roll composition sufficiently breaks the multicollinearity to allow for credible and robust identification.^[The variance inflation factor (VIF) of a regression of quantity on package size and unit cost is about 2.6, much lower than the 5 or 10 threshold that usually indicates strong multicollinearity.]

The identifying variation used to estimate preference parameters comes from aggregating individual choice data. Household-level characteristics are not necessary for identification at this stage. There is sufficient unit cost variation between different sizes of the same brand and across brands within the same size. There is also substantial variation in quantity along these dimensions. A worked-out example of the identification strategy is given in the Appendix.

### Estimation Results
To streamline computation, I estimate my multinomial logit model on individual markets over the 2006-2016 period.^[I use Nielsen's ScanTrack definition for a market which is roughly similar to an MSA.] Table \ref{tab:mnlBostonBaseline} reports the estimates for Boston. Across markets, the estimates are quite similar with major differences suggesting some market-level variation in brand preferences. There is also some variation in size preferences, but all markets prefer small or medium sizes to large package sizes. 

\input{./tables/mnlBostonBaseline.tex}
\input{./tables/mnlEffectsBoston.tex}

The coefficients fit relatively well with intuition. The price coefficient is significantly negative as expected. Angel Soft is the reference brand, so the brand fixed effects indicate that all other brands, including private labels are more likely to be bought over Angel Soft. Somewhat surprisingly, households appear to select against packages with a larger standardized quantity, but this effect is quite small. In terms of physical package sizes, households prefer small- and medium-sized packages over large packages and (in the case of Boston) have a preference for small packages over medium packages. 

To translate this into dollar terms, we can compute the willingness to pay by dividing each coefficient by the unit cost coefficient. In terms of brand preferences, the coefficients imply a wide range of willingness to pay from \$0.04 per standard roll for Scott to \$0.79 for Cottonelle. While this might seem large, especially for more premium brands, it fits the average unit costs quite well. Across all purchases, Angel Soft is about \$0.47 per roll and Cottonelle is about \$1.12. In terms of package sizes, these coefficients imply that households (in Boston) are willing to pay an additional \$0.31 per standard roll for a medium size package (7-12 rolls) and an additional \$0.53 per roll for a small package (1-6 rolls) compared to a large size package (12+ rolls). These are relatively large in that package size preferences are on the same order as brand preferences for more premium brands. 

While this model is a good starting point, a pure multinomial logit model implies a strict substition pattern as a result of the independence from irrelevant alternatives property. This implies that if a new product is introduced, whether a Charmin 36-pack or a private-label single roll, it will draw from other alternatives proportionately. This is at odds with what we would expect given that a Charmin 36-pack is more suited for customers that prefer Charmin or large packages, but it is unlikely to compete with, say, a Scott 4-pack. 

These coefficients are estimates reflect aggregate preferences, but could mask substantial heterogeneity in household-level preferences. To capture observed heterogeneity based on household characteristics (e.g. household size, income, consumption rate, etc.), I estimate this model with interactions between product characteristics and household characteristics in the next section.

## Multinomial Logit with Observable Heterogeneity
The above model only uses market-level aggregates to estimate the parameters of interest and does not leverage any of the individual-level information that I have from the Consumer Panel data. Naturally, there is likely to be heterogeneity in price sensitivity, brand preferences, and other tastes and some of this heterogeneity is likely to be related to household characteristics. In order to allow for this observed heterogeneity, I interact brand, unit costs, quantities, and package sizes with household income, household size, average consumption rate, and type of home (single-family, multi-family, or mobile home). As before, I do this over a wide range of markets and find that XXXXXXX


\input{./tables/mnlBostonObsHet.tex}
\input{./tables/mnlCharlotteObsHet.tex}
\input{./tables/mnlChicagoObsHet.tex}
\input{./tables/mnlColumbusObsHet.tex}
\input{./tables/mnlDallasObsHet.tex}
\input{./tables/mnlDenverObsHet.tex}
\input{./tables/mnlMinneapolisObsHet.tex}
\input{./tables/mnlPhiladelphiaObsHet.tex}
\input{./tables/mnlPhoenixObsHet.tex}


<!-- ## Random Coefficients Model -->
<!-- As a baseline model, I estimate a discrete-choice mixed logit (random coefficients) model. The advantage of using a mixed logit model is that I can take advantage of the panel structure of my data and allow for individual heterogeneity in preferences across various product characteristics. For example, different households may have different preferences over price or package size. A standard discrete choice logit model restricts these preferences to be the same across all households. Furthermore, a mixed logit model also does not place restrictions on the kinds of substitution patterns that may be present.  -->

<!-- Let $U_{hj}$ represent the utility that household $h$ gets from product $j$. We can decompose this utility into a "deterministic" part that relates the utility $U$ to observable factors and an unobservable portion $\epsilon_{hj}$.  -->

<!-- \begin{equation} -->
<!-- U_{hj} = V_{hj} + \epsilon_{hj} -->
<!-- \end{equation} -->

<!-- Letting $V$ be represented as a linear function of observables $X_{hj}$, we get the following equation: -->

<!-- \begin{equation} -->
<!-- U_{hj} = \beta_h' X_{hj} + \epsilon_{hj} -->
<!-- \end{equation} -->

<!-- where $\beta$ is allowed to be different for each household $h$. For most of the individual elements of $\beta$, I will assume a normal distribution except for the price coefficient which I will assume to be lognormal in order to ensure that it is negative. The elements of $x$ are product characteristics that will include ply, brand, package size, standardized unit cost, and total cost. -->

<!-- With this representation and assuming that $\epsilon$ follows a Type 1 extreme value distribution, we can write the choice probabilities as: -->

<!-- \begin{equation} -->
<!-- P_{hi} = \int \frac{\exp(\beta_h' x_{hi})}{\sum_j \exp(\beta_h' x_{hj})} f(\beta) d\beta -->
<!-- \end{equation} -->

<!-- The key parameters of interest are the mean and variance of the distribution of each $\beta$. These estimates will illustrate the heterogeneity in preferences for various product features, with my focus being on preferences for package size and costs.  -->

<!-- The next step is to relate this heterogeneity in individual-level preferences to demographic characteristics. Because of the panel structure of the data, we can obtain estimates of the individual-level preference parameters. Combining that with the richness of the demogrphic data will allow us to relate preference heterogeneity with demographics. For example, if there is substantial heterogeneity in package size preferences, but that preference is strongly correlated with housing, then this would suggest that these preferences are being driven by storage costs. Similarly, if preference heterogeneity in total price was strongly correlated with income, this would suggest preferences are being driven by budget considerations.  -->

<!-- # Counterfactuals -->
<!-- ## No Bulk Discounts -->

<!-- # Robustness -->

<!-- ## Credit Access -->
<!-- If budget constraints are preventing low-income households from buying in bulk, then having access to a credit card may help them better smooth their expenditures over short time horizons. If budget constraints are binding over longer time periods, which could be due to seasonal employment, income volatility, or other unexpected income shocks, then credit cards would not provide the short-term liquidity because the interest rate would effectively cancel out potential bulk discount savings.  -->

<!-- In order to test this hypothesis, I add an indicator for whether or not the household has a credit card. Most interestingly, the regression results in Table \ref{tab:packageSizeFullTpLiq} suggest that credit access does not differentially affect households based on their income, but that having a credit card is associated with purchasing larger package sizes, regardless of income.^[This subsample is only available after 2013. As a further check, I rerun the original analysis on this subsample and the positive relationship between package size and income still holds.] For the poorest households, this effect is large enough to overcome the difference in purchasing with high-income households.  -->

<!-- \input{./tables/packageSizeFullTpLiq.tex} -->

<!-- ## Transportation Costs -->
<!-- Another factor that could be generating this pattern is transportation costs. Low-income households may more heavily rely upon public transport or have less access to cars than high-income households. In order to address this concern, I directly control for car ownership rates from the ACS. The regression results in Table \ref{tab:packageSizeFullTpCar} suggest that transportation may be an important factor in package sizes purchased, but the variation that is being captured by car ownership does not affect the income coefficients.  -->

<!-- \input{./tables/packageSizeFullTpCar.tex} -->

<!-- ## Storage Costs -->
<!-- One competing explanation is that storage costs are driving differences between high- and low-income households. Equation \ref{eq:size} directly controls for the type of residence the household lives in (single-family home, apartment, or mobile home). However, there may be other storage aspects I am missing. High-income households likely have larger homes and therefore lower storage costs for large quantities of items like bulk toilet paper. In order to test this explanation, I redo the above analysis for tampons. Tampons are storable, non-substitutable, and demand is relatively predictable and fixed. However, storage costs are substantially lower for tampons because their packages are smaller. As an approximation, a 2-3 month supply of tampons (~50 units) takes up about 158 cubic inches of space while a 2-3 month supply of toilet paper takes up 5 times as much space.^[Volume calculations based on [Playtex Sport 50-unit package](https://www.walmart.com/ip/Playtex-Sport-Tampons-Unscented-Multi-Pack-25-Regular-Absorbency-And-25-Super-Absorbency-50-Count/24287691) and [Cottonelle Ultra ComfortCare 12-unit package](https://www.amazon.com/Cottonelle-ComfortCare-Toilet-Biodegradable-Septic-Safe/dp/B07C9JYF2W/ref=sr_1_15_a_it?ie=UTF8&qid=1546024137&sr=8-15&keywords=toilet+paper).] -->

<!-- Estimating Equations \ref{eq:size} and \ref{eq:discount} gives qualitatively similar results to my toilet paper analysis. Quantitatively, the results are smaller overall, with slightly flatter bulk discounts (-0.22 instead of -0.25) and less differences in package size purchases (10\% difference instead of 24\%). However, some of the package size differences could be due to the usage of pads. That analysis is not done here. The main takeaway is that the positive correlation between income and package size remains even when storage costs are substantially reduced.  -->

<!-- For completeness, these size choices are likely not due to brand preferences because most brands offer a similar range of sizes (see Figure 2). -->

<!-- \input{./tables/packageSizeFullTampon.tex} -->

<!-- ## Brand Preferences -->
<!-- One alternative explanation for this bulk purchasing pattern could be brand and quality preferences. Maybe cheap brands are offered in small sizes while expensive brands are larger. Therefore, what looks to be bulk purchasing could be brand preference. Figure \ref{fig:brandDist} plots the package size distribution of the top 10 most popular brands. There is substantial overlap in the size distributions (with the exception of warehouse club private labels), so this pattern is unlikely to be driven by brand and quality preferences.^[The top 10 brands account for over 80\% of all purchases, so for clarity I plot only the distributions of these top 10 brands.] -->

<!-- \begin{figure} -->
<!-- \centering -->
<!-- \includegraphics{../5_figures/tpSizeDist.png} -->
<!-- \caption{} -->
<!-- \label{fig:brandDist} -->
<!-- \end{figure} -->

<!-- ## Salience and Consumer Awareness -->
<!-- Following @chetty2009, this could be a case of salience and consumer awareness in that consumers are not aware of the bulk discount because it is not presented to them or they do not compute unit prices when making purchases. To test this, I leverage state-level variation in laws about displaying unit-costs. 18 states have some form of law regulating the display of unit prices, 5 have guidelines, and 27 have neither guidelines or regulations. As my measure of unit-pricing laws, I use the information compiled in the National Institute of Standards and Technology (NIST) Handbook 130. This handbook is published annually following the National Conference on Weights and Measures and consists of numerous laws and regulations that are recommended for states to adopt in order to "achieve, to the maxiumum extent possible, uniformity in weights and measures laws and regulations among the various states and local jurisdictions in order to ... provide uniform and sufficient protection to all consumers in commercial weights and measures practices" [@nist130]. Every year, NIST publishes a summary of which states have adopted unit pricing laws. I use their classification to indicate whether a state has no laws, guidelines, or laws around unit pricing. Since 2004, very few states have changes their status, so the coefficients on unit pricing stringency is primarily being identified off of cross-sectional variation as opposed to longitudinal variation.  -->

<!-- Table \ref{tab:unitPriceLawTp} provides evidence that laws and guidelines are associated with larger package size purchases. Whether the adopted policies are laws or guidelines does not appear to have a substantial difference, but there is a significant difference between having and not having any rules on posting unit prices. However, in the context of bulk buying inequality, incorporating this measure does not affect the coefficient estimates on income, so it is unlikely that information or education is the driving factor behind the positive relationship between income and package size purchases. -->

<!-- \input{./tables/unitPriceLawTp.tex} -->

<!-- # Conclusion and Future Research -->
<!-- Put conclusion here -->

<!-- Previous research has documented that this "spikiness" has strong implications for measuring consumption inequality [@coibion2017]. Furthermore, this could have implications for inflation measurement as well. Given the prevalence of bulk discounts, if a basket price is computed using the largest package available, this may underestimate the price faced by consumers that cannot afford that package, or buy the same amount in smaller shopping trips. For example, the BLS uses unit-prices when computing the price of the CPI market basket. Therefore, the choice of package size can strongly influence this price. If the prices of different package sizes fluctuate differently, this could systematically affect our measurement of inflation. Further research would be necessary to determine if this is the case and what the magnitude could be.^[The BLS specifically deals with multi-unit discounts buy using the "first multiple-unit price" as the price measured. However, the method for dealing with different package sizes is less well defined. Per correspondence with the BLS: "In general, price-per-unit calculations are the standard practice in calculating items with quantity changes. For example if a loaf of bread is \$1 and you a second loaf for \$0.50, you have two loaves for \$1.50, and then depending on the weight of the two loaves, you divide the \$1.50 by number of ounces and get a price per ounce. Due to sample rotation, there is no guarantee that any specific item and specific size – toilet paper, olive oil, etc. – will be in the sample at a given time. If it is, and the economic assistant can’t find the specified size and has to substitute to a different size, price change is calculated on a per unit basis, as illustrated in the above example." Given that the BLS uses unit-prices to compute market basket prices, the choice of package size could strongly influence the computed price of the market basket.] -->

# References

<div id="refs"></div>

# Appendix

## CPI Products and Weights
Table \ref{tab:cpi} shows the CPI weights of storable product categories that often exhibit bulk discounts. These weights come from the Bureau of Labor Statistics Handbook of Methods, Chapter 17: The Consumer Price Index (Updated 2-14-2018). To be conservative in the importance of accounting for quantity discounts, I capture products that are shelf-stable and storable to varying degrees.

The CPI tries to adjust for quantity discounts in that the "first multiple-unit price is reported for use in the CPI." However, to the extent that there are systematic differences in multi-unit purchases, especially for storable goods, this is likely to overestimate the price index for households that consistently buy in bulk and underestimate the price index for households that buy small quantities. 

**Full CPI Basket:** Includes food and beverages, housing, utilities, apparel, transportation, medical care, recreation, and education. 

**"Store" Shopping Basket:** This basket is constructed to reflect the set of goods commonly found at grocery/supercenter/general merchandise stores. Includes food and alcohol at home (9.024), household furnishings (3.341), apparel (3.343), pet products (0.659), recreational goods (1.5), and other goods (1.634). This excludes categories such as rent, utilities, energy, transportation, health care, education, and services (including food service). 

\input{./tables/cpi.tex}

## Annual Consumption Analysis (OLS and LASSO)
In order to establish that annual consumption does not substantially depend on income, I first run a basic OLS regression to establish correlations between household covariates and annual purchases. Table \ref{tab:annualTP} provides the OLS results which shows that while income is statistically significant, it is economically miniscule and other household covariates such as household size and presence of children are more predictive of toilet paper consumption than income. Overall, the income coefficients are not statistically different from each other. As a further check, I use a 20-fold cross-validated LASSO regression to select the most predictive covariates and it supports this intuition by choosing household size and other demographics as predictive of consumption and largely shrinks income coeffients to 0.^[LASSO results are available upon request.]

\input{./tables/annualTP.tex} 

<!-- ## Comparison with Sales and Coupons -->
<!-- Sales, couponing, and brand choice have gotten considerably more attention in the literature than bulk purchasing. Generally, unit costs are treated as fixed across sizes and consumers choose the quantity to purchase. Sales, coupons, and brands affect the expenditures through the unit price. I have already demonstrated the prevalence of bulk discounts. In order to compare the size of bulk discounting against other savings avenues, I estimate the following regression: -->

<!-- \begin{equation} -->
<!-- log(P)_{krbmt} = \beta_1 log(Q)_{krbmt} + \beta_2 Coupon_{krbmt} + \beta_3 Sale_{krbmt} + \lambda_r + \lambda_b + \lambda_m + \lambda_t + \epsilon_{krbmt},  -->
<!-- \end{equation} -->

<!-- where $P$ is the unit price paid on shopping trip $k$ at retailer $r$ of brand $b$ in market $m$ at time $t$. $Q$ is the package size and $\lambda$ are fixed effects. $Coupon$ and $Sale$ are indicators for whether a coupon was used or the product was on sale.  -->

<!-- Table 5 shows that even after controlling for brand and store fixed effects, sales tend to only decrease unit costs by about 5\%. In comparison, the same savings could be realized by purchasing a 33\% larger package (e.g. purchasing an 8-pack instead of a 6-pack of toilet paper). Coupons offer slightly larger savings than bulk purchasing, but can still be reasonably outstripped by bulk purchasing. In the case of toilet paper, with common sizes ranging from 4 to 48 units, having a choice over 2, 3, or 4 times larger packages is within most consumer's choice set. In fact, this is likely to be a more available savings method considering that in the Nielsen data, almost 70\% of purchases were done without a coupon or sale.  -->

<!-- Similar findings hold for tampons, which are shown in Table 6 for completeness. -->

<!-- \input{./tables/bulkDiscountSale.tex} -->

<!-- Furthermore, using the Nielsen Retail Scanner Data, when looking at the movement and prices of individual products, sales and price changes are relatively infrequent. Prices are flat over the course of a year with few, short sales, but sales are not a frequent event as they are in the soft drink category (@hendel2013). Most importantly, even with sales, this often does not change the bulk discounting pattern that larger packages offer lower unit costs.  -->

## Identification Example
This section walks through a small example of exactly what variation is identifying the model parameters.

Recall, the indirect utility function is represented as follows:

\begin{equation}
U_{ij} = \underbrace{\alpha unitCost_j + \beta packSize_j + \gamma q_j + \theta_j}_{V_j} + \epsilon_{ij}
\end{equation}

$unitCost$ and $q$ are continuous variables while $packSize$ and $theta$ are package size and brand dummies. Consider the simplest case, a 2 brand, 2 size market. In this case, we would be under-identified because there are only 3 market share equations available to estimate 4 parameters. Slightly expanding the model to a 2 brand, 3 size market provides 5 equations to estimate 5 unknowns, so we are exactly identified. See illustration below ($p$ denotes the unit cost):

\input{./tables/identification1.tex} 

Assuming a type 1 extreme value distribution of $\epsilon$, the 5 equations used to identify the parameters are the market share equations of the form:

\begin{equation}
S_j = \frac{\exp(V_j)}{\sum_J \exp(V_j)}
\end{equation}

Taking the differenc in log shares between each brand for a given size (which eliminates the package size coefficient), we get the following 3 equations:

\begin{align}
\log(S_{AL}) - \log(S_{BL}) &= \alpha (p_{AL} - p_{BL}) + \gamma (q_{AL} - q_{BL}) + \theta_B 
\\
\log(S_{AM}) - \log(S_{BM}) &= \alpha (p_{AM} - p_{BM}) + \gamma (q_{AM} - q_{BM}) + \theta_B 
\\
\log(S_{AS}) - \log(S_{BS}) &= \alpha (p_{AS} - p_{BS}) + \gamma (q_{AS} - q_{BS}) + \theta_B 
\end{align}

We have 3 equations and 3 unknowns. Algebraically, we should be able to solve this system of equations. However, we need to ensure that we have the variation necessary to solve for our parameters. First, we need variation in unit costs between brands and between sizes. This is not immediately obvious, but this is where we leverage the nonlinear pricing schedule that results from bulk discounting. This ensures that unit costs within a brand are not the same. Furthermore, different brands offer different bulk discounts which generates variation between different brands. This system of equations also requires variation in the quantities between sizes and between brands. This variation is generated because each brand has a different "roll composition" in that brands often vary their sheet count or ply which means that the same "size" package can contain different "amounts" of toilet paper. A specific example will provide a better illustration.

Consider 2 brands of toilet paper, A and B, which come in 2 sizes, Large and Small, where the Large contains 12 rolls. Because of the differences in sheet count and ply, there is some mapping between the rolls of brand A and brand B. Let the relationship be $B = cA$ where $c$ is some scalar. If B had twice as many sheets as brand A, then $c = 2$. These differences in roll composition also mean that the rolls in the package is not a standard unit and we should standardize them to make the same size package comparable across brands. We will let brand A rolls be our "standard" unit. 

\input{./tables/identification2.tex} 

To ensure we have variation, we need to look at the differences in the differences between sizes and between brands. This can be expressed as the following:

\begin{align}
(q_{AL} - q_{BL}) &- (q_{AS} - q_{BS}) 
\\
= (12 - 12c) &- (1 - c) = (1 - c) * (12 - 1)
\end{align}

As long as there is variation between brands in roll composition and the size options are not degenerate, this ensures that there is sufficient variation to identify this parameter.

# Data Appendix
In order to conduct this analysis, we need a dataset that captures consumer decisions and their available choices. I create the necessary dataset by combining two Nielsen datasets: the Consumer Panel dataset and the Retail Scanner dataset. Nielsen's Consumer Panel dataset contains information on consumer purchases as well as a rich set of demographic variables. Nielsen's Retail Scanner dataset contains information on the weekly volumes of products sold at stores that have agreed to share their data with Nielsen. 

## Consumer Panel Data

**Households**
In order to best focus on the consumer choice decision, I remove any households where the head of household is a student or a member of the military because these households likely have different living arrangements that are not representative of a typical household's decision to purchase toilet paper (e.g. dormitories and barracks). This reduces my sample from about 653,554 households to 644,229 households. I also remove 7 households that have missing residence information. 

**Products**
On the products side, there are some products that are obviously miscoded. For example one toilet paper product is reported to have "multi" and "size1_amount" both equal to 36, indicating total package of 1,296 rolls. In reality, only one of those fields was supposed to be 36. I manually correct these discrepancies based on the corresponding product in the Retail Scanner data, because it is likely to have less error. In some cases, I use my best judgement based on similar items offered by the same brand. Overall, 80 products are corrected out of 7,453 total products. I also remove 6 products branded as "to-go" packs since these are unlikely to be used for daily household consumption. 

**Missing Purchases**
I then follow the process of @orhun2018 to identify missing purchase occasions where a household likely made a purchase, but did not report it. A missing purchase would downward bias my calculation of a household's consumption rate. For example, if a household purchased a 4 pack each month for 3 months, but only recorded the first and last occasion, then their daily consumption would be $8/3 \approx 2.67$ rolls/month instead of the true rate of 4 rolls per month. Given a package size $s$, I compute the mean and standard deviation of the time until the next purchase. If, the time between purchases given a size $s$ package is longer than the average duration plus 2 standard deviations, then I flag this as a missing purchase occasion. 

These "missing" purchases are then used to demarcate when a household is "active", defined as a spell without a missing purchase. Hence, if a household had 1 missing purchase, then they are determined to have 2 active periods. I use these active periods to compute a household's average consumption rate, which is as follows (as per @orhun2018):

\begin{equation}
Consumption_h = \frac{\sum_{a = 1}^A \sum_{p = 1}^{P_a - 1} V_{hpa}}{\sum_{a = 1}^{a = A} T_a}
\end{equation}

where $V_{hpa}$ is the volume of toilet paper for purchase $p$ during active period $a$. $P_a$ is the total number of purchases made during active period $a$. All purchases during an active period are included except for the last one because we assume that the purchase made on the final day of an active period is not consumed during that period. 

**Outliers**
Even after correcting miscoded products and identifying potential missing purchases, there remain some outliers. In particular, some households purchase excessively large quantities of items, which may indicate they are purchasing for a small business. In other instances, they are inactive, have many missing purchases, or extremely low consumption rates. For my analysis, I remove these outliers, which meet any of the following criteria:

* Excessive Missingness: The household has more than 3 missing purchases and/or has an inter-purchase duration longer than the 99th percentile of all household's maximum inter-purchase duration.

* Inactivity: The household is active for less than 90 days. 

* Missing/Insufficient Consumption: Household consumption is below the 1st percentile of the distribution or consumption cannot be calculated.

* Extreme Values: The household purchased a quantity or volume higher than the 99th percentile of the quantity or volume distribution or they spent more than \$50 (inflation-adjusted to 2012) on a single purchase. I also remove any purchases for which a price of \$0 is recorded.

As a result of these conditions, 6.5\% of purchases and 28.8\% of households are dropped. These exclusion criteria primarily exclude households that make few purchases in this category. Table \ref{tab:tpPurchClean} shows how many observations and households were affected by each condition. Table \ref{tab:tpPurchDist} how the distribution of the sample compares before and after applying these criteria. Overall, these figures mirror those of @orhun2018 with the main differences being a result of including the 2015 and 2016 data.

\input{./tables/tpPurchClean.tex}

\input{./tables/tpPurchDist.tex}

Finally, for my discrete choice modeling, I restrict the sample to households that purchased a single package. This leaves me with a sample of 3,813,591 purchases across 126,034 households.

## Nielsen Retail Scanner Data
The Nielsen Retail Scanner Data contains weekly pricing, volume, and promotional activity of about 35,000 stores from about 90 retail chains and covers 2006-2016. Each store in the panel reports their weekly quantity sold as well as the weighted average unit price. For a subset of stores, they also report their promotional activity (i.e. if a product was featured or on display). 

Because my focus is on the consumer's choice problem, I only extract information related to a consumer's choice set for toilet paper. In order to do this, I combine all movement files of the toilet paper category and then merge those with the Nielsen Consumer Panel data based on the store ID and the week of the shopping trip. This match reduces the possible size of the Consumer Panel because it requires that households shop at the exact stores that have agreed to report their weekly sales to Nielsen. 

In examining the consumer choice, I have to make a few assumptions with respect to the Retail Scanner Data. 

**Assumption 1:** 
*If a product has no sales, it is not in the consumer's choice set. If a product has positive sales, it is in the consumer's choice set.*

In the data, only products with positive sales are recorded, therefore it is difficult to determine if an available product did not sell (a true zero) or if the product was not available (a missing product). Because the data does not distinguish between missing items and those with no sales, I assume that the selection available to consumers is only the set of items with positive sales during the week they shopped at the store.

## Merging Data 
I merge the two datasets based on store ID and the week of the consumer's shopping trip. As stated above, I assume that all products with positive sales are in the consumer's choice set and I identify their actual purchase choice by matching the product they chose with the product being offered by UPC. There are some cases where these cannot be precisely matched up and I outline my steps to fix these issues below. 

**Missing Brand Name Purchases**
In some cases, the purchase of a brand name cannot be matched by UPC to its corresponding store. In these cases, I simply combine the purchase record from the Consumer Panel with the product assortment offered at that store in the corresponding week. For example, if a consumer records purchasing a 12-pack of Quilted Northern at a particular store in a particular week, but the corresponding store has only recorded sales of other brands (Charmin, Angel Soft, etc.) and maybe other sizes of Quilted Northern (4-, 6-, 8-roll packages), then I add on the consumer's actual purchase to the store assortment. The Kilts Marketing Center has confirmed that this happens occasionally, but they have not been able to ascertain a reason for this occurrence.

**Private-Label Purchases**
In order to maintain anonymity of stores, Nielsen masks the UPCs of private labelled goods in the Retail Scanner Dataset. Since these are commonly purchased, I match private-label purchases between the two datasets based on the following procedure. I record the price, ply, and package size of the item purchased in the Consumer Panel Data. If there is a corresponding item that is the same price, ply, and package size, I record that as a match. This is a conservative matching algorithm and misses some items that might have been purchased at a sale price since the prices would not match up. If there remain unmatched purchases, I follow the same procedure as with the brand-name purchases and append the record from the Consumer Panel to the store's assortment.

**Missing Stores**
Not all individual stores share scanner data with Nielsen or even those that do are not able to be linked to a corresponding store in the Consumer Panel data. In these cases, I impute the choice set available to households by using Assumption 2 below:

**Assumption 2:** 
*Stores in the same retail chain and DMA offer the same assortment.*

Given that pricing and inventory policies are often set at a regional or national level, this is likely a weak assumption. Furthermore, the results of DellaVigna and Gentzkow (2017) suggest that pricing is quite similar across stores within the same retail chain. While it is not precisely true that all stores in a chain offer the same assortment of products or offer the exact same price (which is pointed out in DellaVigna and Gentzkow (2017)), I take a conservative approach and generate a "representative" store within a chain by taking the union of the products offered and taking the quantity-weighted average price of those stores for each product. To capture the fact that some chains may coordinate inventories within a region, I generate with "representative" store based on a chain-DMA. For example, if Chain A has multiple stores in Boston and Atlanta, I construct two "representative" stores, one with the set of products offered in the Boston area and the other with the set of products offered in the Atlanta area. If product assortments are set at the national level, there should not be much difference, but this approach is a conservative way to capture the product assortment faced by a consumer.

The results of this matching procedure are recorded in Table \ref{tab:scannerClean}. I start with the Consumer Panel data that has been cleaned as outlined in the "Consumer Panel Data" section. We can see that a majority of the sample shrinkage occurs because Nielsen has not assigned certain stores an ID and because some stores that have been assigned an ID do not share their scanner data with Nielsen. Overall, the sample remains large and could be credibly expanded under Assumption 2 below.

\input{./tables/scannerClean.tex}

**Collapsing Products**
For some products, a brand-size does not define a unique product. In these cases, I collapse these items to a composite brand-size with a standardized size, unit cost, price, and ply reflecting the average of the component products. Within a store-week, about 33\% of prices are within 1\% of the mean price, 50\% of prices composing these "composite" products are within 10\% of the mean price and 75\% are within 25\% of the mean price. Overall, price variation is relatively muted within these aggregated brand-size products. These variations are concentrated in certain brands which tend to have more within-brand variation, like Charmin and Angel Soft, as well as the catch-all "Other" category. Allowing for finer gradations of these brands would help reduce this variation. For example, the Charmin "brand" includes their Ultra Soft and Ultra Strong subtypes which currently are combined into a single Charmin product depending on the available size.

\newpage

| Coef          | Constant | Income   | HH Size  | Cons. Rate | Multi-Fam Home | Mobile Home |
|---------------|----------|----------|----------|------------|----------------|-------------|
| Unit Cost (-) | 3.04***  | -0.01*** | 0.02     | -0.10      | -0.54***       | -1.38***    |
| Small         | 1.88***  | -0.01*** | -0.10*** | -0.18      | -0.07          | 1.13***     |
| Medium        | 0.97***  | -0.001   | -0.08*** | 0.21*      | -0.23***       | 0.46***     |

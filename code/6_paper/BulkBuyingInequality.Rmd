---
title: "Saving Space: Bulk Buying, Storage Costs, and Inequality"
author: "E. Mallick Hossain"
date: "`r format(Sys.time(), '%B %d, %Y')`"
output:
  pdf_document:
    number_sections: yes
bibliography: reference.bib
fig_caption: true
citation_package: natbib
fontsize: 12pt
geometry: margin=1in
header-includes:
  - \usepackage[utf8]{inputenc}
  - \usepackage{amssymb}
  - \usepackage{amsmath}
  - \usepackage{bbm}
  - \usepackage{setspace}
  - \onehalfspace
  - \usepackage[multiple, symbol]{footmisc}
  - \usepackage[nolists, noheads]{endfloat}
  - \renewcommand{\efloatseparator}{\mbox{}}
  - \usepackage{caption}
  - \captionsetup[figure]{labelsep=space}
  - \captionsetup{font=small,skip=0pt}
  - \usepackage{multirow}
  - \usepackage{longtable}
  - \usepackage{xcolor}
  - \usepackage{hyperref}
---

\renewcommand{\thefootnote}{\fnsymbol{footnote}}

\begin{center}
\href{https://docs.google.com/viewer?url=https://github.com/emallickhossain/WarehouseClubs/raw/master/code/6_paper/BulkBuyingInequality.pdf}{\textcolor{blue}{Updated Version Here}}\footnote[1]{I wish to thank my advisers, Aviv Nevo, Holger Sieg, Katja Seim, and Sarah Moshary for their sound advice and constructive criticism. Thanks to Emek Basker, Chris Cronin, Frank DiTraglia, Eileen Divringi, Jim Ferry, Ishan Ghosh, Joao Granja, Jeff Lin, Paolo Martellini, Davin Reed, Paul Sangrey, Anna Tranfaglia, and Keith Wardrip for their comments. Thanks to Dmitri Koustas for providing data on warehouse clubs. The conclusions drawn from the Nielsen data are those of the researcher(s) and do not reflect the views of Nielsen. Nielsen is not responsible for, had no role in, and was not involved in analyzing and preparing the results reported herein.}
\end{center}
 
\renewcommand{\thefootnote}{\arabic{footnote}}
\setcounter{footnote}{0}

\begin{abstract}
\singlespace
This paper shows that high-income households buy in bulk more often than low-income households, especially for storable, non-food items. Thus, low-income households pay higher unit prices because they miss out on bulk discounts and do not store for future consumption. I provide evidence that households increase their bulk buying when their income increases. Using an event study, I show that warehouse club entry increases bulk purchasing, but only for middle- and high-income households. I develop a model of consumer choice that incorporates liquidity constraints, storage constraints, and preferences, which are potential drivers of these patterns in the data. I show that that storage costs account for a small portion of this difference with the majority accounted for by liquidity constraints and preferences. Counterfactual exercises show that removing storage costs would only close 23\% of the gap compared to changing preferences for quantity, which would close 63\% of the gap. These findings suggest that policymakers could reduce expenditure inequality by increasing liquidity and unit-price awareness for low-income households and increasing access to bulk sizes for middle-income households.
\end{abstract}

\newpage

# Introduction
Firms commonly use bulk discounts to price discriminate [@stole2007]. Successful price discrimination requires that consumers cannot resell products, thereby undoing a non-linear price schedule. However, when a product is storable, consumers can "resell" the product to their future selves and unbundle the non-linear price schedule [@hendel2014]. Using Nielsen's Scanner data, I find that 92\% of grocery products have bulk discounts, with steeper discounts for non-food items like toilet paper, paper towels, and diapers. Many non-food grocery items are "necessities", which I define as products for which consumption is driven by household composition, demand is reasonably predictable, and substitution to other product categories is infeasible. Toilet paper and diapers are examples of "necessities". Since consumption preferences are similar for necessities across households and these items are storable, households should purchase at the lowest unit price and consume out of storage, effectively undoing the retailer's non-linear price schedule. However, households do not always purchase the largest sizes. I find that high-income households are 9 percentage points more likely to buy non-food items in bulk sizes compared to only 1 percentage point more likely for food items, with especially large gaps for "necessity" items like toilet paper.^[I define "bulk" sizes as packages in the top 2 quintiles of the size distribution for that product.] Why do low-income households not buy in bulk more often? This paper assesses the contributors to differences in bulk buying and finds that while storage constraints are important, preference for quantity drives the majority of the difference.

First, I document important stylized facts about the bulk discounting landscape and consumer behavior using Nielsen's Retail Scanner and Homescan data. One finding is that bulk discounting is near-universal; 92\% of almost 700 product categories in the grocery sector have bulk discounts, with steeper discounts for storable, non-food items compared to food items.^[Non-food grocery items include toilet paper, diapers, paper towels, cleaning supplies, bags, etc.] At the median, a 10\% increase in package size lowers the unit price by 4.4\%, but there is substantial variation around this median depending on the product category. 

Second, households making over \$100k are 9 percentage points more likely to buy storable, non-food items in bulk compared to observationally similar households making under \$25k (i.e. similar household sizes, marital status, children, etc.). These gaps are particularly large for necessities like paper towels (24 percentage points), toilet paper (21 percentage points), and diapers (11 percentage points). In the case of toilet paper, I estimate that low-income household spend 38\% more than if they were to purchase the lowest unit-price item available.

<!-- Change this to some dollar amount -->

A wide range of factors may contribute to this "bulk buying gap", each with different implications for policymakers. This paper provides descriptive and reduced-form, causal evidence of the importance of these factors. It then estimates a formal model that focuses on the contribution of storage costs and liquidity constraints. I consider a range of possible factors: *Store access*, *salience of unit prices*, *liquidity constraints*, and *storage costs*. 

First, *store access* could be a factor because stores may not stock a full range of brands and sizes. Most notably, warehouse clubs (like Costco) only stock "bulk" sizes while dollar stores (like Dollar General) tend to stock "budget" sizes. If households shop at different stores based on their income, then policymakers should encourage low-income households to shop at stores offering larger package sizes or encourage warehouse clubs to operate in low-income areas.

Second, the *salience of unit prices* and cognitive constraints could prevent households from making the most economical decision.^[See @chetty2009 for evidence of salience with respect to sales tax.] If high-income households compare unit prices while low-income households do not, then policymakers should increase awareness through education and reduce cognitive load by adopting unit pricing regulations that make unit prices visible and easily comparable across products.^[The National Conference on Weights and Measures, supported by the National Institute of Standards and Technology (NIST), has proposed Uniform Unit Pricing Regulation, which has only been adopted by 8 states. 10 states have some regulations on unit pricing, and the remaining 32 have no laws or regulations. See @nist130 for proposed regulation and state adoption of unit pricing laws.]

*Liquidity* or budget constraints are the third factor that could prevent households from buying in bulk. Even if a household has access to large sizes and is aware of bulk savings, they may not be able to afford the upfront investment necessary to buy in bulk. If liquidity constraints are the main obstacle to bulk buying, then policymakers should focus on expanding access to credit or short-term savings vehicles for low-income households. Additionally, benefit payments (like the Supplemental Nutrition Assistance Program) could be structured to encourage bulk purchasing (or expanded to cover non-food necessities like toilet paper and diapers). 

The fourth factor is *storage* costs. "Storage" in this setting refers both to transportation and physical storage of the item. Both are directly related to the item's physical size, so I consider them jointly as "storage" costs. If access to cars or larger storage spaces (i.e. bigger houses) encourages bulk purchasing, then that suggests a role for delivery and subscription services, which policymakers could subsidize for low-income households.

I first assess each of these factors using descriptive and reduced-form, causal methods. These analyses provide evidence as to the scale of each factor. However, they cannot predict how households might respond to changes in store assortments or product compositions. To predict consumer responses, I estimate a structural demand model and run counterfactuals to see how households respond to increases in product "concentration" or changes in store assortments.^[By product "concentration", I refer to the ability to pack more usable product into the same amount of space. For example, laundry detergent can be 2x concentrated.]

To estimate the effect of *store access* and store choice, I provide descriptive evidence that shopping at warehouse clubs accounts for a large share of the variation in bulk buying between high- and low-income households. Then, I estimate a differences-in-differences model of warehouse club entry to show that warehouse clubs increase bulk buying, but only among middle- and high-income households. Even after accounting for the effect of warehouse clubs, a bulk buying gap persists within stores.

To assess the importance of *awareness*, I use between-state variation in unit price laws and regulations. As another check, I leverage between-state moves of Nielsen households to better isolate the effects of unit pricing regulations. I find that unit price regulations are associated with increased bulk buying across all households. These differences in the salience of unit prices are neither economically nor statistically significant.

To explore the importance of *liquidity*, I use within-household income changes between years. The hypothesis is that as households become richer, budget constraints become less restrictive and households are able to buy in bulk more. I find evidence that as households get richer, they buy in bulk more.

<!-- Variables such as access to large sizes, transportation costs, storage costs, or liquidity constraints could all contribute to this gap. I find that access only accounts for XX\% of the gap while transportation and storage accounts for XX\% of the gap. These findings suggest that the "poverty penalty" induced by not buying in bulk could be alleviated by doing XX. -->

## Related Literature
This paper contributes to the literature on consumer discounting and purchasing behavior. Both marketing and industrial organization have extensively studied how consumers take advantage of a variety of discounts.^[For analyses of consumer responses to sales, see @pesendorfer2002; @hong2002; @erdem2003; @hendel2006a; @hendel2006b; @hendel2013. For analyses of coupons, see @narasimhan1984; @nevo2002; @anderson2004.] @nevo2009 and @nevo2018 provide an overview of how often consumers take advantage of sales, coupons, bulk discounts, and generic brands and examine how these behaviors changed during the Great Recession. While while numerous studies have analyzed sales and coupons, bulk discounts have been much less studied from a household standpoint even though they have many desirable properties [@nevo2009; @nevo2018; @orhun2018]. For example, I show that bulk discounts apply across a wide-range of products and are common within stores, which means that search costs are virtually non-existent, especially compared with other savings strategies that households could use. Bulk discounts are also available even when sales or coupons are unavailable, further eliminating possible search costs. Finally, quality differences between products are virtually non-existent because different sized packages contain identical goods. I build on this literature and identify the factors that affect a household's ability to use bulk discounts, arguably the most universal and largest discount available in retail.

This paper also contributes to the literature on non-linear pricing and second-degree price discrimination (See @stole2007 for a review). A majority of this literature has focused on firms' ability to use non-linear pricing to price discriminate [@pesendorfer2002; @nevo2002; @hendel2006a; @hendel2006b; @mcmanus2007; @cohen2008; @hendel2013; @hendel2014]. However, compared to third-degree price discrimination, customer segments are not well defined. This paper provides insight into how consumers are segmented. For storable, non-food products, I show that bulk discounts segment consumers along income lines. I also document the prevalence and magnitude of bulk discounts.

Finally, this paper contributes to the literature on poverty penalties by documenting lower takeup of bulk discounts among low-income households, who thereby pay higher prices for the same goods. 

The rest of the paper is structured as follows. Section \ref{data} describes the Nielsen data used for analysis. Section \ref{stylized} documents stylized facts of bulk discounting. Section \ref{reduced} presents reduced-form analysis of contributing factors to the bulk buying gap. Section \ref{model} introduces the model. Section \ref{estimation} presents estimation results. Section \ref{counterfactual} shows the counterfactual exercises and Section \ref{conclusion} concludes.

# Data
\label{data}

In this section, I describe the two primary datasets used for my analysis and give a brief overview of their respective features. The Consumer Panel data provides information on household purchasing behavior and what choices they ultimately make. The Retail Scanner data provides information on the product options and prices available each week. Combining the two gives a relatively comprehensive overview of each household's purchasing behavior and environment.

## Nielsen Consumer Panel Data
<!-- This uses the getHomescan.R script -->
<!-- This uses the homescanSummaryStats.R script -->
I use the Nielsen Consumer Panel Dataset from 2004--2017.^[Researcher's own analyses calculated (or derived) based in part on data from The Nielsen Company (US), LLC and marketing databases provided through the Nielsen Datasets at the Kilts Center for Marketing Data Center at The University of Chicago Booth School of Business.] This dataset is a longitudinal panel of about 178,000 unique households, of which I observe about 40,000 each year from 2004--2006 and about 60,000 households each year from 2007--2017. This data records all purchases from any outlet intended for personal, in-home use and covers about 30\% of consumer expenditures. About 1.5 million unique items (defined by UPC code) are recorded in categories such as groceries, cleaning supplies, health/personal care items, and basic general merchandise.

Households scan all items that they purchase, input quantities, prices, date of purchase, and store purchased from. Nielsen retains about 80% of its panel from year to year with the mean and median tenure of a household being 4 and 3 years, respectively. 

For my analysis, I exclude households with a student or military head of household as well as those with an annual income of less than \$5k. Only about 3\% of households are excluded and and I analyze the remaining 173,000 households in my sample. 

I exclude alcohol, tobacco, pet items, health and beauty items, general merchandise, "magnet", and "deferred" product categories from my analysis. Alcohol and tobacco are excluded because due to their addictive qualities, consumers may purchase these items differently than other non-addictive substances. A smoker may choose to only buy 1 pack with the intention of quitting even though a full carton may deliver a better value. Pet items are excluded to focus on products intended for human consumption. I exclude health and beauty items and general merchandise because these products are unlikely to be bought in bulk or have irregular consumption patterns, such as trash cans, printers, eye shadow, antacids, etc. "Deferred" modules are categories that Nielsen has stopped tracking, so to maintain a consistent sample of products, these are excluded from my analysis. Finally, "magnet" purchases are items which do not have a UPC codes such as fresh fruits and vegetables, deli counter items, or bakery items. Because these items are only recorded for a subset of Nielsen households and are not standardized like typical consumer packaged goods, I also exclude them from my analysis. This process leaves me with 721 unique product categories ("modules" in Nielsen's parlance). Since this paper focuses on bulk purchases, I also exclude 28 modules that have 5 or fewer sizes across all products. These excluded modules include miscellaneous household supplies such as cleaning brushes, thermometers, gift sets, and some canned frozen juices. Overall, the products analyzed are common household staples including almost all food categories, basic toiletry items, and non-food essentials like toilet paper, soaps/detergents, and diapers.

Table \ref{tab:homescanSummaryStats} presents descriptive statistics for households in the sample. All succeeding analysis uses Nielsen's projection weights to be nationally representative unless otherwise stated. The sample's composition is slightly older and less Hispanic than the overall US population. Due to Nielsen's top-coding of income, the sample has a slightly lower average income than the overall population. Nielsen samples fewer households under \$10k so there are potential sample selection and bias issues for extremely low-income households even after using statistical projection weights. With these caveats, the Nielsen data provides a good representation of US household shopping behaviors.

\input{./tables/homescanSummaryStats.tex}

## Nielsen Retail Scanner Data
The Nielsen Retail Scanner Data contains weekly prices and volume sold of individual products at about 35,000 stores from about 90 retail chains between 2006-2016. I match the Retail Scanner Data with the Consumer Panel data based on store identification numbers and purchase dates. By matching the two datasets, I can see what a household's choice set was and what they ultimately chose to purchase. 
<!-- To address concerns about the importance of store selection, inequality still persists within store types. See Figure \ref{fig:TPBulkInequality} -->

<!-- \begin{figure} -->
<!-- \centering -->
<!-- \includegraphics{../5_figures/TPBulkInequality} -->
<!-- \caption{} -->
<!-- \label{fig:TPBulkInequality} -->
<!-- \end{figure} -->

# Stylized Facts
\label{stylized}

In this section, I document 2 stylized facts about the shopping landscape and then show how each was constructed. First, I show that bulk discounts apply to 92\% of grocery categories and can be quite large. These discounts are substantial and are often more valuable for non-food items than the savings offered by coupons. Second, I show that households making over \$100k are 9 percentage points more likely to buy storable, non-food items in bulk than households making under \$25k, compared to only 1 percentage point for food items).^[I define a bulk size as a product in the the top 2 quintiles of the size distribution for its product category.] Gaps are particularly large for necessity items like toilet paper, diapers, and paper towels. I show that average package sizes purchased increases with income across a majority of product categories. 

## Bulk Discount Prevalence
<!-- This uses the bulkDiscountAllProds.R script -->
To establish the prevalence and magnitude of bulk discounts, I use Nielsen's Scanner data from 2016. I estimate bulk discounts using the following regression for each product category.
\begin{equation}
log(P)_{ibm} = \beta log(Size)_{ibm} + \lambda_{bm} + \epsilon_{ibm},
\end{equation}
where $P$ is the unit price of product $i$ from brand $b$ purchased in market $m$ (defined as a store-week). $Size$ is the item's package size (measured in the most common units of that product, like ounces for milk). To capture possible changes within stores over time, I control for a store-brand-week fixed effect, $\lambda$. Variation in unit prices across package sizes within the same store-brand-week identify $\beta$. If retailers offer bulk discounts, then $\beta$ will be negative.

Figure \ref{fig:bulkDiscountAllProds} plots the distribution of $\beta$. I find that  92\% of all product modules have a significant and negative $\beta$ and that non-food items generally have larger discounts than food items. The median $\beta$ is -0.53 for non-food products, which means that a 10 percent increase in package size corresponds to a 5.3 percent decrease in unit costs. This discount is larger than the median $\beta$ for food items of -0.43. Given the size and near-universality of bulk discounts, households could use these savings to lower costs without sacrificing consumption.^[Primarily for non-food items. Food items are more likely to deteriorate and some items, like milk, expire quickly, so using bulk discounts to stockpile is infeasible.]

\begin{figure}
\centering
\includegraphics{../5_figures/bulkDiscountAllProdsScanner.png}
\caption{}
\label{fig:bulkDiscountAllProds}
\end{figure}

<!-- This uses the discountSavings.R script -->
<!-- This uses the couponSavings.R script -->

How do bulk discounts compare with coupons? The Consumer Panel data includes information on coupon values. To compute average savings, I compute the average the average discount of redeemed coupons by product category. Figure \ref{fig:couponSavings} plots the distribution of coupon savings. Overall, bulk savings are comparable to coupon savings, but the patterns are flipped. Coupons are more valuable for food products while bulk discounts are more valuable for non-food items.  

\begin{figure}
\centering
\includegraphics{../5_figures/couponSavings.png}
\caption{}
\label{fig:couponSavings}
\end{figure}

## Discounting Behavior
<!-- This uses the discountingBehavior.R script -->
Given the substantial savings given by bulk discounts, do households take advantage of them? To answer this question, I calculate the expenditure-weighted share of each household's shopping basket that is purchased in bulk (defined as a purchase in the largest 2 quintiles of the size distribution for that product category). I then regress this "bulk share" on household income after controlling for other household characteristics that could affect how much a household purchases or are correlated with income and plot the income coefficients. 
\begin{equation}
\label{eq:discountingBehavior}
Y_{idt} = \beta_1 Income_{idt} + \gamma X_{idt} + \lambda_d + \lambda_t + \epsilon_{idt},
\end{equation}
where $Y_i$ is household $i$'s basket share of bulk purchases in market $d$ in year $t$. $X$ consists of household demographics (age, household size, marital status, and presence of children).^[I control for these covariates because household income varies with household size, age, marital status, and children for reasons outside of socio-economic status. These covariates are also likely to affect how much a household purchases.] $\lambda$ is a year and a market fixed effect.

The results are plotted in Figure \ref{fig:savingsBehavior}. The coefficients show that for households making over \$100k, bulk purchases of non-food items compose 45\% of households' baskets, a substantially greater share than the 33-37\% share for households making less than \$25k. For food items, the differences are much smaller with bulk sizes composing 36\% of high-income household baskets compared to 34-35\% for low-income households. 

One explanation is that richer households consume more and therefore, they buy larger packages. While that is likely true for certain product categories (like chocolate), it should be seen in purchases of food items because by definition, they must be consumed within a short period of time. However, there is little difference in bulk purchasing of food items after adjusting for important household characteristics. Increased consumption could also explain the gap in non-food items, but these goods do not have to be consumed immediately and therefore, households could be deferring consumption to a later date, but incurring the costs now. However, some products, such as toilet paper, paper towels, and diapers, are unlikely to exhibit increased consumption because these are products consumed out of necessity and are unlikely to be consumed for pleasure. As a result, the different expenditure patterns for these products suggests that low-income households pay more for the same basket simply because they buy smaller quantities per trip.

Across popular spending categories, the biggest gaps are in storable categories like paper towels (24 percentage points), toilet paper (21 percentage points), and diapers (11 percentage points), while perishable categories show little relationship (See Figure \ref{fig:savingsBehaviorModules}).

\begin{figure}
\centering
\includegraphics{../5_figures/savingsBehavior.png}
\caption{}
\label{fig:savingsBehavior}
\end{figure}

\begin{figure}
\centering
\includegraphics{../5_figures/savingsBehaviorModules.png}
\caption{}
\label{fig:savingsBehaviorModules}
\end{figure}

## Missed Bulk Savings
<!-- This uses the tpLowestPrice.R and otherModsLowestPrice.R script -->
Given that low-income households are less likely to buy in bulk and bulk savings can be substantial, how much money are they "leaving on the table"? The easiest way to compute the amount of "missed" savings would be to see what alternatives the household had when they were shopping and compare the unit price they could have paid with the unit price they actually paid. Fortunately, linking the Nielsen Consumer Panel with the Nielsen Scanner data provides this information.

Due to storage limitations, I can only do this analysis on only a few product categories. To capture both perishable and non-perishable items with relatively fixed demand, I focus on toilet paper, diapers, milk, and eggs. For each category, I do the following to compute the average "missed" savings. First, for each shopping trip, I compute the "first-best" unit price the household would have paid if they had obtained the lowest unit price given their brand and store choice. Then, to get the average "missed" savings for a household, I expenditure-weight each of these missed savings and aggregate to the household level. Based on this measure, I get the following average missed savings by income group (averages computed for a family of 4).

\input{./tables/lowestPrice.tex}

Overall, missed savings are quite substantial and it appears that most households could realize savings from buying larger packages. I estimate the differences in "missed" savings between households from the following regression:
\begin{equation}
Y_{idt} = \beta Income_{idt} + \gamma X_{idt} + \lambda_{dt} + \epsilon_{idt},
\end{equation}
where $Y$ is the "missed" savings of household $i$ in market $d$ in year $t$. $Income$ is the household's income bin and $X$ consists of demographic measures (age, household size, presence of children). $\lambda$ is a market-year fixed effect. Table \ref{tab:lowestPrice} shows that low-income households miss out on more savings than high-income households and these "missed" savings are primarily in non-perishable categories like toilet paper and diapers as opposed to perishable categories like milk and eggs.

\input{./tables/lowestPriceRegFin.tex}

# Reduced-Form Analysis
\label{reduced}

In this section, I conduct reduced-form tests to estimate how important *access*, *liquidity*, and *awareness* contribute to the bulk buying gap

## Store Preference
I document the contribution of warehouse clubs to bulk buying inequality by estimating the bulk buying gap with and without purchases from warehouse clubs.

First, low-income households may not shop at stores that offer a wide range of sizes and their corresponding bulk discounts. In particular, warehouse clubs attract higher-income households while dollar stores attract lower-income households. Warehouse clubs offer large product sizes and deliver value through volume discounts. On the other hand, dollar stores offer small package sizes and deliver value through budget-friendly offerings. Different store choices could be due to preferences or a lack of access, whether due to distance, lack of public transit, etc. Figure \ref{fig:expendituresByChannel} illustrates that households spend about 50\% of their annual budget at grocery stores across all income brackets. The mix of stores that compose the other 50\% of spending differs between income groups with spending at discount and other stores decreasing with income, while spending at warehouse clubs increases with income.

\begin{figure}
\centering
\includegraphics{../5_figures/expendituresByChannel.png}
\caption{}
\label{fig:expendituresByChannel}
\end{figure}

While store choice may affect the assortments that households face and their ability to buy in bulk, these differences in bulk purchasing do not disappear within store types. If households were unable to buy in bulk solely due to access, then conditional on being in similar stores, households should make similar purchase decisions. Figure \ref{fig:} illustrates that even within store types, differences in bulk buying persist.

## Warehouse Club Entry on Bulk Purchasing
One possible explanation for this "bulk buying gap" is that low-income households do not have access to large, bulk sizes that high-income households do. Warehouse club stores offer access to large packages with low unit prices in exchange for an annual membership fee. The largest warehouse club chains are Costco, Sam's Club, and BJ's. If access is the primary driver of this gap, then warehouse club entry should correspond with an increase in bulk purchasing. 

Over my sample period, I observe 419 warehouse club openings.^[Data was collected by contacting companies and searching for store opening dates and was provided by the authors of @coibion2017.] Since the Nielsen data has a panel structure, I can observe the changes in purchases within a household before and after a warehouse club opens. I estimate the following regression:
\begin{equation}
\label{eq:eventStudy1}
Y_{idt} = \beta_1 S^1_{idt} + \beta_2 S^2_{idt} + \gamma X_{idt} + \lambda_{id} + \lambda_{dt} + \epsilon_{idt},
\end{equation}
where $Y$ is the expenditure-weighted share of bulk purchases made by household $i$ in market $d$ in quarter $t$. $S^n$ is an indicator for whether there is a warehouse club within distance band $n$ (the first band is within 20km and the second band is 20-40km) as of quarter $t$.^[Distance is measured between the centroids of the household ZIP code and the store ZIP code.] $X$ is a vector of household characteristics including income, household size, age, and presence of children. $\lambda$ are fixed effects for household-markets (to ensure identification is from club entry and not household moves) and market-quarter. Standard errors are clustered at the household-market level. 

Before estimating Equation \ref{eq:eventStudy1}, I graphically illustrate the event study by plotting the coefficients of a modified version of Equation \ref{eq:eventStudy1}.
\begin{equation}
\label{eq:eventStudy2}
Y_{idt} = B_{it} \left( \sum_t \beta_t E_{it} + \alpha \right) + \gamma X_{it} + \lambda_{id} + \lambda_{dt} + \epsilon_{idt},
\end{equation}
where $B$ is an indicator for whether a household was continuously located in a market with a warehouse club opening and was there during the 4 quarters prior to the opening and 8 quarters after the opening. $E$ is a dummy for each of the 4 quarters prior to opening and each of the 8 quarters after opening. The $\beta$ coefficients are plotted in Figure \ref{fig:eventStudy}

\begin{figure}
\centering
\includegraphics{../5_figures/eventStudy.png}
\caption{}
\label{fig:eventStudy}
\end{figure}

The event study shows that warehouse clubs increase a household's bulk purchasing by about 1 percentage point, but this effect is primarily concentrated in higher-income households, with households making under \$25k having no significant change in their purchasing behavior. Households making over \$100k exhibit the largest increase in bulk purchasing, but I cannot definitively say if their change is larger than the change for other households making over \$25k.

The estimation results for Equation \ref{eq:eventStudy1} are reported in Table \ref{tab:clubOpening} and after a warehouse club opens, bulk purchasing increases by about 1 percentage point overall, but when this analysis is run separately on each quartile, this effect is primarily on the upper end of the income distribution with households making under \$25k exhibiting no significant difference in their bulk purchasing.

\input{./tables/clubOpening.tex}

## Income Changes on Bulk Purchasing
Nielsen retains about 80\% of its households from year to year. As a result, within-household changes provide additional variation. 49\% of households experience an income change between years with 24\% experiencing 1 change, 12\% experiencing 2 changes, and the remainder experiencing 3 or more changes. Appendix Figure \ref{fig:incomeTransitionsAll} shows the unweighted transition probabilities of the Nielsen data. While most households remain in the same income bracket from year to year, a large number of households transition between income brackets. Most of these transitions are between adjacent income bins, but some households have bigger income transitions, skipping multiple bins upward or downward. These within-households income changes help identify how income increases and decreases affect a household's ability to buy in bulk. 

About 49\% of households in the Nielsen Consumer Panel experience a change in income. As a result, I can analyze whether income changes affect bulk purchasing. The hypothesis is that increased income will alleviate some of the factors that prevent households from buying in bulk. With increased income, households may have more access to bulk sizes (e.g. households can afford a Costco membership) or reduced budget constraints. 

To see how bulk buying changes when a household's income changes, I estimate a modified version of Equation \ref{eq:discountingBehavior}:
\begin{equation}
Y_{idt} = \beta_1 Income_{idt} + \beta_2 X_{idt} + \lambda_i + \lambda_d + \lambda_t + \epsilon_{idt},
\end{equation}

where $Y_i$ is household $i$'s basket share of bulk purchases in year $t$ in market $d$. $Income$ is a dummy for a household $i$'s income bin. $X$ consists of household demographics (age, household size, and presence of children). $\lambda$ consists of fixed effects. In order to capture any household-specific, time-invariant features, I use a household fixed effect. 

The regression results are reported in Table \ref{tab:discountingBehaviorIncomeSwitchers}. While there is a statistically significant increase in bulk buying as a household increases their income, the effect is at most 1 percentage point. The coefficients also show that bulk purchasing increases more for non-perishable items than for perishable items. The gap in bulk purchasing was about 4 percentage points. While income may help reduce some barriers to buying in bulk, the largest barriers will not be fixed through income changes. These other factors include transportation and storage costs (i.e. car and home ownership are unlikely to change unless a household experiences an extremely large income shock). 

\input{./tables/discountingBehaviorIncomeSwitchers.tex}

## Salience and Consumer Awareness
Another possible contributor to this bulk buying gap is *awareness* or *salience*. Consumers may not be aware of the bulk discount because it is not visible or they do not compute unit prices when making purchases. To test this hypothesis, I leverage state-level variation in laws about displaying unit-prices. 18 states have some form of law regulating the display of unit prices and 32 have no laws or regulations. As my measure of unit-pricing laws, I use the information compiled in the National Institute of Standards and Technology (NIST) Handbook 130. This handbook is published annually following the National Conference on Weights and Measures and consists of numerous laws and regulations that are recommended for states to adopt in order to "achieve, to the maximum extent possible, uniformity in weights and measures laws and regulations among the various states and local jurisdictions in order to ... provide uniform and sufficient protection to all consumers in commercial weights and measures practices" [@nist130]. Every year, NIST publishes a summary of which states have adopted unit pricing laws. I use their classification to indicate whether or not a state has laws regarding unit pricing. Since 2004, very few states have adopted or repealed regulations on unit prices, so the coefficient on unit pricing regulation is primarily being identified off of cross-sectional variation between states that have regulations and those that do not.

Table \ref{tab:unitPriceLaw} provides evidence that unit pricing regulations are associated with increases in bulk purchases, but these increases are concentrated in the top half of the income distribution. Columns 1 and 3 are the coefficients from Equation \ref{eq:discountingBehavior} estimated on coarser income groups. Bulk buying increases with income, but the difference is starkest for non-food items, where households making over \$100k are 9.2 percentage points more likely to buy in bulk compared to households making under \$25k. When I account for state-level unit-pricing regulations, this gap diminishes slightly to 8.6 percentage points in states without unit-price regulations. In states with unit-price regulations, there are a few notable takeaways. First, the relationship with bulk purchasing is almost identical across food and non-food products. Second, the lowest-income households buy slightly less often in bulk compared to the poorest households in states without such regulations. Households making \$25-50k are virtually unchanged between different regulation regimes. However, households making over \$50k are more likely to buy in bulk. 

To the extent that shopping environments are largely similar across states for common grocery items, these results suggest that increasing the salience of unit prices encourages high- and middle-income households to buy in bulk more often while the lowest-income households reduce their bulk purchases. For households making under \$25k, the slight reduction in bulk purchasing could be due to confusion about unit prices and how to apply the information to one's purchase decision. If that is the case, improving education and clarity about how unit pricing works could eliminate the confusion.

\input{./tables/unitPriceLaw.tex}

# Model
\label{model}

The previous analyses show that both income increases and warehouse club entry increase bulk buying. However, these changes could be related to other important factors, such as storage costs. For example, if transport and storage costs are the limiting factor, then subsidies or incentives for warehouse clubs to open will have limited effects. To isolate storage costs and determine the effects of *only* changing product assortments or compositions, a structural model is necessary.

In order to conduct this analysis, I estimate a discrete choice model of toilet paper purchases. Toilet paper is the ideal product for this analysis because it is a necessity item with easily observable dimensions of differentiation, namely price, quality, quantity, and package size. It is offered in a wide range of package sizes and stores often stock numerous brands and sizes (grocery and mass merchandise stores usually stock 35-40 unique brand-sizes). Even though there are 216 unique brands in the data, the top 5 brands and private-label store brands account for 86\% of sales.^[The top 5 brands are Angel Soft, Charmin, Cottonelle, Quilted Northern, and Scott. The 86\% figure excludes Charmin Basic, Charmin Essentials, and Scott Extra Soft, which are classified as separate "brands" under Nielsen's classification.]. Additionally, I focus on the 5 most common package sizes, which are 4, 6, 9, 12, and 24-roll packages. I define a product as a unique brand-size.^[Specifically, this is a unique brand-roll count-sheet count. Because firms sell "double", "mega", and "super mega" rolls which have different sheet counts (and no standardized definition), two package with the same number of rolls can have different numbers of usable sheets. Therefore, defining a product as a brand-roll combination would require a stance on how to properly average a 4 "double" roll pack with a 4 "mega" roll pack. Because these have different underlying quantities, I choose to treat them as separate products.] ^[There are some minor changes even within these rolls and I take steps to properly adjust these small discrepancies. For example, a 396-sheet roll and a 400-sheet roll are both a "big" roll. Since 396-sheet rolls are more common, I map the 400-sheet roll to the 396-sheet roll and adjust the price down by 1\%] ^[This definition is more aggregated than defining a product as a UPC. UPCs are generated for a wide variety of reasons ranging from changing product compositions to having holiday-themed packaging. Across my sample of toilet paper purchases, 77\% of products defined using my brand-size definition have the exact same price across underlying UPCs within stores. 95\% have price differences less than \$0.50. Furthermore, given the product, I find it unlikely that there is additional meaningful differentiation that would be picked up by a finer gradation of products. This could be captured by including an unobservable $\xi$, but given that price differences are almost non-existent and not economically significant in more than 5\% of cases, there is not much unobserved variation to capture.] Additionally, underlying toilet paper consumption is primarily a function of household size and age, not income.^[A 100-fold cross-validated LASSO regression of annual purchases on household characteristics rules out income as significantly predictive. See Appendix for details.] Contrary to other products, increased purchase quantity of toilet paper is unlikely due to increased consumption.

For model estimation, I use about 600,000 toilet paper purchases across about 72,000 households at grocery and mass merchandisers. 

## Model Setup
A household's product choice is modeled as follows. When making a purchase, a household considers the price, quality, quantity, and size of each product and chooses the product that maximizes their utility. I model the choice as static because even though households can store toilet paper, I assume they only make purchases when their inventory is low.^[@hendel2014 offers a theoretical justification. Even though there are dynamic elements for both firms and consumers, firms will price so consumers only purchase when their inventory is low. Furthermore, this assumption would only be problematic in cases where consumers purchased before their inventory was exhausted and the remaining inventory crowded out their preferred purchase size.] ^[Some readers may be concerned about sales. This would only be an issue for my static framework if they made small packages cheaper than their larger counterparts. I show that even when small packages are on sale, larger packages still provide a better value.] I use brand fixed effects to capture quality differences between products. Quality differences within brands are virtually non-existent in this product category because within brands, the only differences are in package size (e.g. 4, 12, 24-roll packages) or roll type (single, double, mega rolls). Household $i$'s utility from product $j$ can be represented in the following way:

\begin{equation}
\label{eq:mlogit}
U_{ij} = \underbrace{\beta_1 Price_j + \beta_2 \log(SheetsPP_j) + \beta_3 Large_j + \theta_{b(j)}}_{V_{ij}} + \epsilon_{ij},
\end{equation}

where $Price$ is the price of the item, $SheetsPP$ is the number of total sheets in the package divided by household size, $Large$ is a dummy for if the package has more than 12 rolls and $\theta$ is a brand fixed effect. Since consumption is related to household size, I divide total usable sheets by number of people in the household to generate a quantity measure that is comparable across households of different sizes. I define large as bigger than 12 rolls because a 12 roll package is likely the upper limit of what can comfortably be carried in addition to other items. This serves as an approximation of storage and transportation costs because it is an indicator for a packages physical size.

The price coefficient is primarily identified from variation between shopping trips, whether due to price differences between stores or price differences within stores, either due to temporary sales or more permanent price shifts. The "large" and "sheets" coefficients are identified from variation in product composition. Sheet counts differ between brands and also within brands because of "single", "double", and "mega" rolls. For example, two 4-roll packages will differ in the number of sheets if one package is 4 "double" rolls and the other is 4 "mega" rolls, even though the package sizes are similar.

Fixing the coefficients generates a multinomial logit model while allowing them to vary across households will generate a random coefficients (i.e. mixed logit) model. I first estimate the multinomial logit model and then allow for unobserved heterogeneity through a random coefficients model, using maximum likelihood and simulated maximum likelihood, respectively.

The objects of interest are the willingness-to-pay for package size and quantity. The willingness to pay for large packages is a measure of storage and/or transportation costs because these are a function of the package size. On the other hand, willingness to pay for quantity measures differences in preferences for buying in bulk. These differences could be due to differences in liquidity constraints, time costs, or awareness of bulk discounts.

To extend the model and incorporate liquidity, I interact price with an indicator of whether the shopping trip was made during the first 10 days of the month. This indicator serves as a proxy for liquidity constraints because households are likely to be less budget constrained at the start of the month compared to the end of the month due to pay and billing cycles.

# Estimation Results
\label{estimation}

## Multinomial Logit
I estimate the model for each year and income group. For interpretability, I convert all estimated coefficients into a willingness to pay measure by dividing each coefficient by the price coefficient. Figure \ref{fig:logitCoefficients} shows the willingness to pay for package size and quantity by year and income group. As expected, storage costs (the willingness to pay for package size in my framework) are negative, but they are relatively small with little difference between income groups until about 2014 when storage costs increase dramatically. The main finding is that while storage costs are significantly negative, they are similar across income groups and move in parallel over time. 

\begin{figure}
\centering
\includegraphics{../5_figures/logitCoefficients.png}
\caption{}
\label{fig:logitCoefficients}
\end{figure}

Willingness to pay for quantity (measured in log sheets per person) also moves in parallel over time, but there are substantial differences between income groups. Over time, all income groups have increased their willingness to pay for quantity with the lowest-income households increasing the most, from \$1.96 per log point to \$4.20 per log point.^[Because toilet paper packages come in a wide range of quantities, the normal approximation between log differences and percent breaks down. A full log point would correspond to about a 2.7x increase in the package quantity. Put in context, this would be the willingness to pay to move from about a package of 4 "regular" rolls to a package of 4 "triple" rolls.] However, a gap still remains between income groups with higher-income groups willing to pay more for quantity than lower-income groups. 

Given my specification, this quantity preference is a combination of both *awareness* and *liquidity*. This preference includes *awareness* because households that are more aware of bulk discounts and unit prices will pay more attention to the underlying quantity available in a package. This preference also includes *liquidity* because package prices increase in quantity, so a budget-constrained household's inability to purchase a large quantity package would manifest itself as a weaker preference for quantity than an unconstrained household. 

In addition to the size and quantity preferences, this figure reveals an interesting trend across income groups. For households making under \$50k, their preference for quantity has been gradually increasing over time, with slightly accelerated increases during the Great Recession. For households making over \$50k, the story is different. Preferences were stable between 2006-2008, increased between 2009-2011, and then stabilized again since 2012. 

This model provides a foundation for understanding how preferences differ across households by capturing heterogeneity in preferences attributable to household income and household size (through the sheets per person variable). However, within these groups, the model generates restrictive substitution patterns that result from the Independence of Irrelevant Alternaties property of multinomial logit. This would imply that households within an income group will proportionally substitute towards other products in response to a price increase. In reality, households will likely to substitute to similar quality products or similarly priced products. This model also does not incorporate the panel structure of the data because it treats each shopping trip as an independent observation.

## Mixed Logit
In order to accomodate more flexible substitution patterns and to leverage the panel structure of the data, I estimate a mixed logit version of Equation \ref{eq:mlogit} with the $\beta$ coefficients assumed to be lognormal because consumers should prefer lower prices, smaller packages, and larger quantities. 


# Counterfactuals
\label{counterfactual}

With the parameter estimates from the previous section, I can run counterfactuals to predict how households will respond to the elimination of storage costs and changes in preferences. For these counterfactual exercises, I use parameter estimates from 2016 and compare all counterfactual results to a "base case" of predicted purchases given 2016 selections. The results of my counterfactual exercises are reported in Table \ref{tab:counterfactualMNL}

\input{./tables/counterfactualMNL.tex}

The "Base" case reports the average number of sheets purchased per trip for each income group given the shopping environment and parameter estimates in 2016. The quantity purchased is increasing in income with the highest income households purchasing 10\% larger quantities than the lowest income households. In the "No Storage" scenario, I set the storage cost of all products to 0 and as a result, all households purchase larger quantities with the largest increase happening in the poorest households.^[This would be possible if manufacturers increased the "concentration" of their products, which allows them to offer the same quantity in a smaller package.] Eliminating storage costs reduces the gap between high- and low-income households by 23\%. Even though the poorest households substantially increase their purchase quantity, this change encourages all households to purchase larger quantities. In the "Same Qty. Pref." scenario, I set all household's coefficient on quantity equal to that of the highest-income households. This provides an even larger increase in quantity purchased over the base case compared to eliminating storage costs, with the gap shrinking by 63\%. Combining both of these cases, the gap shrinks by 89\%. The remaining gap is due to differences in brand preferences and price sensitivities across income groups. 

These counterfactuals policies that eliminate storage costs would encourage low-income households to buy larger quantities, but would only moderately reduce the inequality between high- and low-income households. Even a policy targeted at the poorest households, such as a subsidy to offset storage costs or a delivery service, would still be less effective than policies aimed at increasing preferences for quantity. 

# Conclusion
\label{conclusion}


<!-- # Counterfactuals -->
<!-- ## No Bulk Discounts -->

<!-- # Robustness -->

<!-- ## Credit Access -->
<!-- If budget constraints are preventing low-income households from buying in bulk, then having access to a credit card may help them better smooth their expenditures over short time horizons. If budget constraints are binding over longer time periods, which could be due to seasonal employment, income volatility, or other unexpected income shocks, then credit cards would not provide the short-term liquidity because the interest rate would effectively cancel out potential bulk discount savings. -->

<!-- In order to test this hypothesis, I add an indicator to Equation \ref{eq:size} for whether or not the household has a credit card.^[Starting in 2013, Nielsen began gathering information on the method of payment (e.g. cash, check, credit, etc.). About half of households have scanners that record this information.] The results reported in Table \ref{tab:packageSizeFullTpLiq} suggest that credit access likely has no significant effect for low-income households, and may even be negative. As given, the results suggest that households with income between \$25-50k that have a credit card purchase 5\% larger packages than their cash-only counterparts. There is no significant difference for households making \$50-100k and the richest households purchase 7\% larger packages if they have credit access. -->

<!-- One should be cautious interpreting these coefficients too deeply because there are vast compositional differences with a majority of high-income households selecting into credit cards while a majority of low-income households do not have a credit card. Furthermore, there are likely large differences in the types of credit cards that high-income and low-income households use, especially with regard to interest rates. Finally, there are likely behavioral differences in usage in that high-income households probably use credit cards as substitutes for cash while low-income households may use credit cards as an actual line of credit. -->

<!-- Even with these caveats, this evidence suggests that expanding access to credit for low-income households is unlikely to close the gap in bulk buying behavior. -->

<!-- \input{./tables/packageSizeFullTpLiq.tex} -->

<!-- ## Transportation Costs -->
<!-- Another factor that could be generating this pattern is transportation costs. Low-income households may rely more heavily upon public transport or have less access to cars than high-income households. Because larger packages can be difficult to carry, even if households wanted to purchase larger quantities, they may not be able to carry it home. In order to address this concern, I obtain tract-level data on the share of people with access to at least 1 vehicle from the American Community Survey.^[Specifically, I use the answer to "How many automobiles, vans, and trucks of one-ton capacity or less are kept at home for use by members of this household?" as my measure of vehicle access. A household's vehicle access is fixed based on the 2010-2014 ACS 5-year estimate.] I match the Census tracts to their corresponding ZIP codes and estimate Equation \ref{eq:size} including the car share of the household's ZIP code as well as interactions with income. However, there is not much variation in vehicle access by ZIP code with over 95\% of ZIP codes having 90\% of people with access to at least 1 vehicle. The regression results in Table \ref{tab:packageSizeFullTpCar} suggest that vehicle access is positively correlated with purchase sizes of the lowest-income households. A 1 percentage point increase in vehicle access is associated with an increase in quantity purchased of 0.7\% for households making less than \$25k and only a 0.3\% increase for households making over. The potential effect of increasing access to transportation is likely larger given that vehicle access is probably strongly correlated with income. The above exercise assumes that the probability that a household has access to a vehicle is equal given a household's ZIP code. The actual vehicle access share is probably 1 for high-income households and it is only the lower-income households that are reducing the average access measure. -->

<!-- \input{./tables/packageSizeFullTpCar.tex} -->

<!-- ## Storage Costs -->
<!-- One competing explanation is that storage costs are driving differences between high- and low-income households. Equation \ref{eq:size} directly controls for the type of residence the household lives in (single-family home, apartment, or mobile home). However, there may be other storage aspects I am missing. High-income households likely have larger homes and therefore lower storage costs for large quantities of items like bulk toilet paper. In order to test this explanation, I redo the above analysis for tampons. Tampons are storable, non-substitutable, and demand is relatively predictable and fixed. However, storage costs are substantially lower for tampons because their packages are smaller. As an approximation, a 2-3 month supply of tampons (~50 units) takes up about 158 cubic inches of space while a 2-3 month supply of toilet paper takes up 5 times as much space.^[Volume calculations based on [Playtex Sport 50-unit package](https://www.walmart.com/ip/Playtex-Sport-Tampons-Unscented-Multi-Pack-25-Regular-Absorbency-And-25-Super-Absorbency-50-Count/24287691) and [Cottonelle Ultra ComfortCare 12-unit package](https://www.amazon.com/Cottonelle-ComfortCare-Toilet-Biodegradable-Septic-Safe/dp/B07C9JYF2W/ref=sr_1_15_a_it?ie=UTF8&qid=1546024137&sr=8-15&keywords=toilet+paper).] -->

<!-- Estimating Equations \ref{eq:size} and \ref{eq:discount} gives qualitatively similar results to my toilet paper analysis. Quantitatively, the results are smaller overall, with slightly flatter bulk discounts (-0.22 instead of -0.25) and less differences in package size purchases (10\% difference instead of 24\%). However, some of the package size differences could be due to the usage of pads. That analysis is not done here. The main takeaway is that the positive correlation between income and package size remains even when storage costs are substantially reduced. -->

<!-- For completeness, these size choices are likely not due to brand preferences because most brands offer a similar range of sizes (see Figure 2). -->

<!-- \input{./tables/packageSizeFullTampon.tex} -->

<!-- ## Brand Preferences -->
<!-- One alternative explanation for this bulk purchasing pattern could be brand and quality preferences. Maybe cheap brands are offered in small sizes while expensive brands are larger. Therefore, what looks to be bulk purchasing could be brand preference. Figure \ref{fig:brandDist} plots the package size distribution of the top 10 most popular brands. There is substantial overlap in the size distributions (with the exception of warehouse club private labels), so this pattern is unlikely to be driven by brand and quality preferences.^[The top 10 brands account for over 80\% of all purchases, so for clarity I plot only the distributions of these top 10 brands.] -->

<!-- \begin{figure} -->
<!-- \centering -->
<!-- \includegraphics{../5_figures/tpSizeDist.png} -->
<!-- \caption{} -->
<!-- \label{fig:brandDist} -->
<!-- \end{figure} -->


<!-- # Conclusion and Future Research -->
<!-- \label{conclusion} -->


<!-- Bulk discounts have large implications for price measurement. Most macro-level research has focused on differences in aggregate spending between households or between various product categories [@krueger2006; @heathcote2010; @attanasio2014; @aguiar2015]. Under the assumption that homogeneous goods have the same prices, increased expenditures directly correspond to increased consumption. However, as @kaplan2015 show, prices for homogeneous goods are not the same and this non-uniformity has severe consequences for measurement. Most recently, @coibion2017 prove that consumption inequality is overstated due to bulk buying because households make fewer shopping trips and therefore measured price dispersion increases even if underlying consumption does not.^[This dispersion results because the Diary portion of the Consumer Expenditure Survey only records the past 2 weeks of purchases. Bulk buying allows some households to make purchases during those 2 weeks and others will not have to purchase during those 2 weeks.] -->

<!-- Using hedonic regression, I find that unit prices are underestimated by about 10\% due to bulk discounts, but this underestimation varies widely across product categories. See Appendix for analysis. -->

<!-- ## Behavioral Recommendations -->
<!-- If these patterns are due to cognitive constraints or behavioral factors faced by low-income households [@mullainathan2013; @mullainathan2006], then there may be some low-cost ways to reduce this consumption inequality. Since consumers tend to be loss averse, a simple reframing of these discounts from "bulk savings" to a "tiny tax" might encourage households to buy larger sizes and realize the commensurate savings. Second, since consumers respond to their shopping context, policymakers could provide a counternarrative to the idea that low-income households buy small quantities just to get by and market the narrative that cost-conscious consumers buy in bulk. Finally, for non-perishable foods that are eligible for Supplemental Nutrition Access Program (SNAP) funds, creating a separate "bulk" account would encourage households to shift spending to these bulk sizes, saving the SNAP program money and encouraging positive shopping habits among households. -->

<!-- Previous research has documented that this "spikiness" has strong implications for measuring consumption inequality [@coibion2017]. Furthermore, bulk discounts could have implications for inflation measurement as well. Given the prevalence of bulk discounts, if a basket price is computed using the largest package available, measured prices may underestimate the price faced by consumers that cannot afford that package, or buy the same amount in smaller shopping trips. For example, the BLS uses unit-prices when computing the price of the CPI market basket. Therefore, the choice of package size can strongly influence this price. If the prices of different package sizes fluctuate differently, bulk discounts could systematically affect our measurement of inflation. Further research would be necessary to determine if inflation rates differ across product sizes is the case and what the magnitude could be.^[The BLS specifically deals with multi-unit discounts buy using the "first multiple-unit price" as the price measured. However, the method for dealing with different package sizes is less well defined. Per correspondence with the BLS: "In general, price-per-unit calculations are the standard practice in calculating items with quantity changes. For example if a loaf of bread is \$1 and you a second loaf for \$0.50, you have two loaves for \$1.50, and then depending on the weight of the two loaves, you divide the \$1.50 by number of ounces and get a price per ounce. Due to sample rotation, there is no guarantee that any specific item and specific size  toilet paper, olive oil, etc.  will be in the sample at a given time. If it is, and the economic assistant cant find the specified size and has to substitute to a different size, price change is calculated on a per unit basis, as illustrated in the above example." Given that the BLS uses unit-prices to compute market basket prices, the choice of package size could strongly influence the computed price of the market basket.] -->

# References

<div id="refs"></div>

\processdelayedfloats

\newpage
\appendix

<!-- \begin{figure} -->
<!-- \centering -->
<!-- \includegraphics{../5_figures/incomeTransitionsAll.png} -->
<!-- \caption{} -->
<!-- \label{fig:incomeTransitionsAll} -->
<!-- \end{figure} -->

<!-- ## CPI Products and Weights -->
<!-- Table \ref{tab:cpi} shows the CPI weights of storable product categories that often exhibit bulk discounts. These weights come from the Bureau of Labor Statistics Handbook of Methods, Chapter 17: The Consumer Price Index (Updated 2-14-2018). To be conservative in the importance of accounting for quantity discounts, I capture products that are shelf-stable and storable to varying degrees. -->

<!-- The CPI tries to adjust for quantity discounts in that the "first multiple-unit price is reported for use in the CPI." However, to the extent that there are systematic differences in multi-unit purchases, especially for storable goods, price estimates based on bulk sizes are likely to overestimate the price index for households that consistently buy in bulk and underestimate the price index for households that buy small quantities. -->

<!-- **Full CPI Basket:** Includes food and beverages, housing, utilities, apparel, transportation, medical care, recreation, and education. -->

<!-- **"Store" Shopping Basket:** This basket is constructed to reflect the set of goods commonly found at grocery/supercenter/general merchandise stores. Includes food and alcohol at home (9.024), household furnishings (3.341), apparel (3.343), pet products (0.659), recreational goods (1.5), and other goods (1.634). I exclude categories such as rent, utilities, energy, transportation, health care, education, and services (including food service). -->

<!-- \input{./tables/cpi.tex} -->

## Annual Consumption Analysis (OLS and Elastic Net)
In order to establish that income is not predictive of a household's toilet paper consumption rate, I first estimate basic OLS regressions and then formalize the result using a 100-fold cross-validated elastic net regression to select the most predictive variables. If income and toilet paper consumption are related, then an OLS regression will extract the correlation.

First, I estimate a household's daily consumption in the following manner. I compute the total number of sheets purchased by a household in a given year, excluding the final purchase of the year since it may not be consumed within the year. I divide this total by the number of days between the first and last purchase of the year to get a household's average daily consumption rate. This method avoids complications where end of the year inventory may be carried over to the following year or a household may start the year with some inventory.

Given a household's average daily consumption rate, I estimate an OLS regression of consumption on household characteristics:

\begin{equation}
Y_i = \beta X_i + \epsilon_i,
\end{equation}

where $Y$ is household $i$'s average daily consumption and $X$ is a vector of household characteristics. Figure \ref{fig:annualPurchasesTP} plots the income coefficients of an OLS regression including only income covariates and the coefficients when household size, age, marital status, and presence of children are included. The graph illustrates that after controlling for covariates that plausibly cause increased consumption, income is not significantly correlated with consumption.

\begin{figure}
\centering
\includegraphics{../5_figures/annualPurchasesTP.png}
\caption{}
\label{fig:annualPurchasesTP}
\end{figure}

The above specification omits many other possible covariates that could be correlated with average daily consumption. When there are many possible variables that can be included, there is a risk of over-fitting. Elastic net regularization is a machine learning method that penalizes over-fitting and selects only the most predictive variables.

The elastic net solves the following minimization problem:
\begin{equation}
\min_{\beta} \Vert y - X \beta \Vert^2 + \lambda \left(\alpha \Vert \beta \Vert_1 +  (1 - \alpha) \Vert \beta \Vert^2_2 \right),
\end{equation}

where $\Vert \cdot \Vert_1$ is the L1 norm and $\Vert \cdot \Vert_2$ is the L2 norm. The OLS estimate is the $\beta$ that solves the minimization problem with only the first term. The second term and third term provide penalties to shrink and select for the most predictive variables.

I set the mixing parameter ($\alpha$) to be 0.5. When covariates are correlated in groups, Lasso regression ($\alpha = 1$) tends to only select one and discard all other members of the group while ridge regression ($\alpha = 0$) tends to shrink correlated coefficients towards each other [@zou2005]. Since some of the possible covariates form natural groups (e.g. all income bins or all markets), I chose $\alpha = 0.5$ since this tends to include or exclude groups together.

I estimate a 100-fold cross-validated elastic net regression to select the most predictive covariates. The resulting estimates selects many household characteristics including household size, age, marital status, presence of children, and race, but excludes almost all income and geographic coefficients.^[Elastic net results are available upon request.]

<!-- # Data Appendix -->
<!-- In order to conduct this analysis, I need a dataset that captures consumer decisions and their available choices. I create the necessary dataset by combining two Nielsen datasets: the Consumer Panel dataset and the Retail Scanner dataset. Nielsen's Consumer Panel dataset contains information on consumer purchases as well as a rich set of demographic variables. Nielsen's Retail Scanner dataset contains information on the weekly volumes of products sold at stores that have agreed to share their data with Nielsen. -->

<!-- ## Consumer Panel Data -->

<!-- **Households** -->
<!-- In order to best focus on the consumer choice decision, I remove any households where the head of household is a student or a member of the military because these households likely have different living arrangements that are not representative of a typical household's decision to purchase toilet paper (e.g. dormitories and barracks). This restriction reduces my sample from about 653,554 households to 644,229 households. I also remove 7 households that have missing residence information. -->

<!-- **Products** -->
<!-- On the products side, there are some products that are obviously miscoded. For example one toilet paper product is reported to have "multi" and "size1_amount" both equal to 36, indicating total package of 1,296 rolls. In reality, only one of those fields was supposed to be 36. I manually correct these discrepancies based on the corresponding product in the Retail Scanner data, because it is likely to have less error. In some cases, I use my best judgement based on similar items offered by the same brand. Overall, 80 products are corrected out of 7,453 total products. I also remove 6 products branded as "to-go" packs since these are unlikely to be used for daily household consumption. -->

<!-- **Missing Purchases** -->
<!-- I then follow the process of @orhun2018 to identify missing purchase occasions where a household likely made a purchase, but did not report it. A missing purchase would downward bias my calculation of a household's consumption rate. For example, if a household purchased a 4 pack each month for 3 months, but only recorded the first and last occasion, then their daily consumption would be $8/3 \approx 2.67$ rolls/month instead of the true rate of 4 rolls per month. Given a package size $s$, I compute the mean and standard deviation of the time until the next purchase. If, the time between purchases given a size $s$ package is longer than the average duration plus 2 standard deviations, then I input a "missing purchase" flag. -->

<!-- These "missing" purchases are then used to demarcate when a household is "active", defined as a spell without a missing purchase. Hence, if a household had 1 missing purchase, then they are determined to have 2 active periods. I use these active periods to compute a household's average consumption rate, which is as follows (as per @orhun2018): -->

<!-- \begin{equation} -->
<!-- Consumption_h = \frac{\sum_{a = 1}^A \sum_{p = 1}^{P_a - 1} V_{hpa}}{\sum_{a = 1}^{a = A} T_a} -->
<!-- \end{equation} -->

<!-- where $V_{hpa}$ is the volume of toilet paper for purchase $p$ during active period $a$. $P_a$ is the total number of purchases made during active period $a$. All purchases during an active period are included except for the last one because I assume that the purchase made on the final day of an active period is not consumed during that period. -->

<!-- **Outliers** -->
<!-- Even after correcting miscoded products and identifying potential missing purchases, there remain some outliers. In particular, some households purchase excessively large quantities of items, which may indicate they are purchasing for a small business. In other instances, they are inactive, have many missing purchases, or extremely low consumption rates. For my analysis, I remove these outliers, which meet any of the following criteria: -->

<!-- * Excessive Missingness: The household has more than 3 missing purchases and/or has an inter-purchase duration longer than the 99th percentile of all household's maximum inter-purchase duration. -->

<!-- * Inactivity: The household is active for less than 90 days. -->

<!-- * Missing/Insufficient Consumption: Household consumption is below the 1st percentile of the distribution or consumption cannot be calculated. -->

<!-- * Extreme Values: The household purchased a quantity or volume higher than the 99th percentile of the quantity or volume distribution or they spent more than \$50 (inflation-adjusted to 2012) on a single purchase. I also remove any purchases for which a price of \$0 is recorded. -->

<!-- **Uncommon Stores** -->
<!-- I remove any purchases that do not occur in major channels. There are some stores for which it seems unlikely that they sell toilet paper (e.g. bakery, vet, barber, etc.). Over 75\% of toilet paper purchases are recorded at grocery or discount stores with the remainder primarily at drug stores, dollar stores, or warehouse clubs. However, these other stores likely offer more restricted assortments, or in the case of warehouse clubs, may not be available to all households. -->

<!-- As a result of these conditions, 6.5\% of purchases and 28.8\% of households are dropped. These exclusion criteria primarily exclude households that make few purchases in this category. Table \ref{tab:tpPurchClean} shows how many observations and households were affected by each condition. Table \ref{tab:tpPurchDist} how the distribution of the sample compares before and after applying these criteria. Overall, these figures mirror those of @orhun2018 with the main differences being a result of including the 2015 and 2016 data. -->

<!-- \input{./tables/tpPurchClean.tex} -->

<!-- \input{./tables/tpPurchDist.tex} -->

<!-- Finally, for my discrete choice modeling, I restrict the sample to households that purchased a single package. This restriction leaves me with a sample of 3,813,591 purchases across 126,034 households. -->

<!-- ## Nielsen Retail Scanner Data -->
<!-- The Nielsen Retail Scanner Data contains weekly pricing, volume, and promotional activity of about 35,000 stores from about 90 retail chains and covers 2006-2016. Each store in the panel reports their weekly quantity sold as well as the weighted average unit price. For a subset of stores, they also report their promotional activity (i.e. if a product was featured or on display). -->

<!-- Because my focus is on the consumer's choice problem, I only extract information related to a consumer's choice set for toilet paper. I combine all movement files of the toilet paper category and then merge those with the Nielsen Consumer Panel data based on the store ID and the week of the shopping trip. This match reduces the possible size of the Consumer Panel because it requires that households shop at the exact stores that have agreed to report their weekly sales to Nielsen. -->

<!-- In examining the consumer choice, I have to make a few assumptions with respect to the Retail Scanner Data. -->

<!-- **Assumption 1:** -->
<!-- *If a product has no sales, it is not in the consumer's choice set. If a product has positive sales, it is in the consumer's choice set.* -->

<!-- In the data, only products with positive sales are recorded, therefore it is difficult to determine if an available product did not sell (a true zero) or if the product was not available (a missing product). Because the data does not distinguish between missing items and those with no sales, I assume that the selection available to consumers is only the set of items with positive sales during the week they shopped at the store. -->

<!-- ## Merging Data -->
<!-- I merge the two datasets based on store ID and the week of the consumer's shopping trip. As stated above, I assume that all products with positive sales are in the consumer's choice set and I identify their actual purchase choice by matching the product they chose with the product being offered by UPC. There are some cases where these cannot be precisely matched up and I outline my steps to fix these issues below. -->

<!-- **Missing Brand Name Purchases** -->
<!-- In some cases, the purchase of a brand name cannot be matched by UPC to its corresponding store. In these cases, I simply combine the purchase record from the Consumer Panel with the product assortment offered at that store in the corresponding week. For example, if a consumer records purchasing a 12-pack of Quilted Northern at a particular store in a particular week, but the corresponding store has only recorded sales of other brands (Charmin, Angel Soft, etc.) and maybe other sizes of Quilted Northern (4-, 6-, 8-roll packages), then I add on the consumer's actual purchase to the store assortment. The Kilts Marketing Center has confirmed that these discrepancies happen occasionally, but they have not been able to ascertain a reason for the mistakes. -->

<!-- **Private-Label Purchases** -->
<!-- In order to maintain anonymity of stores, Nielsen masks the UPCs of private labelled goods in the Retail Scanner Dataset. Since these are commonly purchased, I match private-label purchases between the two datasets based on the following procedure. I record the price, ply, and package size of the item purchased in the Consumer Panel Data. If there is a corresponding item that is the same price, ply, and package size, I record that as a match. This algorithm is conservative and misses some items that might have been purchased at a sale price since the prices would not match up. If there remain unmatched purchases, I follow the same procedure as with the brand-name purchases and append the record from the Consumer Panel to the store's assortment. -->

<!-- **Missing Stores** -->
<!-- Not all individual stores share scanner data with Nielsen or even those that do are not able to be linked to a corresponding store in the Consumer Panel data. In these cases, I impute the choice set available to households by using Assumption 2 below: -->

<!-- **Assumption 2:** -->
<!-- *Stores in the same retail chain and DMA offer the same assortment.* -->

<!-- Given that pricing and inventory policies are often set at a regional or national level, this assumption is weak. Furthermore, the results of DellaVigna and Gentzkow (2017) suggest that pricing is quite similar across stores within the same retail chain. While it is not precisely true that all stores in a chain offer the same assortment of products or offer the exact same price (which is pointed out in DellaVigna and Gentzkow (2017)), I take a conservative approach and generate a "representative" store within a chain by taking the union of the products offered and taking the quantity-weighted average price of those stores for each product. To capture the fact that some chains may coordinate inventories within a region, I generate with "representative" store based on a chain-DMA. For example, if Chain A has multiple stores in Boston and Atlanta, I construct two "representative" stores, one with the set of products offered in the Boston area and the other with the set of products offered in the Atlanta area. If product assortments are set at the national level, there should not be much difference, but this approach is a conservative way to capture the product assortment faced by a consumer. -->

<!-- The results of this matching procedure are recorded in Table \ref{tab:scannerClean}. I start with the Consumer Panel data that has been cleaned as outlined in the "Consumer Panel Data" section. I can see that a majority of the sample shrinkage occurs because Nielsen has not assigned certain stores an ID and because some stores that have been assigned an ID do not share their scanner data with Nielsen. Overall, the sample remains large and could be credibly expanded under Assumption 2 below. -->

<!-- \input{./tables/scannerClean.tex} -->

<!-- **Collapsing Products** -->
<!-- For some products, a brand-size does not define a unique product. In these cases, I collapse these items to a composite brand-size with a standardized size, unit cost, price, and ply reflecting the average of the component products. Within a store-week, about 33\% of prices are within 1\% of the mean price, 50\% of prices composing these "composite" products are within 10\% of the mean price and 75\% are within 25\% of the mean price. Overall, price variation is relatively muted within these aggregated brand-size products. These variations are concentrated in certain brands which tend to have more within-brand variation, like Charmin and Angel Soft, as well as the catch-all "Other" category. Allowing for finer gradations of these brands would help reduce this variation. For example, the Charmin "brand" includes their Ultra Soft and Ultra Strong subtypes which currently are combined into a single Charmin product depending on the available size. -->

<!-- ## Price Decomposition -->
<!-- This uses the priceDecompChannelType.R script -->

<!-- One underlying assumption of expenditure measures is that increased expenditures reflect a combination of increased consumption and increased quality. Bulk discounts violate this assumption because they induce a non-linear price schedule. Because of their nature, it is possible for households to record increased expenditures even with the same underlying quality and quantity of goods. As an example, consider a homogeneous product that comes in 2 different sizes and has a bulk discount. Households have a fixed demand for the product, but may vary in their expenditure path to satisfy their demand. "Bulk" households only buy big sizes and "budget" households only buy small sizes. Because of discounts, "bulk" households record lower expenditures than "budget" households and an analysis of only aggregates might infer that the "bulk" buying household was obtaining a lower quality or quantity of the purchased goods. This example illustrates how bulk discounts bias inequality measures downward. -->

<!-- The same intuition carries over into a setting with differing product qualities. If the "bulk" household buys premium products in bulk and the "budget" household buys small, economy products, the "bulk" household might spend more for the same underlying quantity and achieve a higher quality. However, the bulk discounts would offset some of the predicted cost increases associated with the premium brand. -->

<!-- I focus on the underestimation of quality induced by bulk discounts. I examine unit price differences instead of overall expenditure differences. Ideally, unit price differences should only reflect differences in underlying product quality or, possibly, shopping amenities. In reality, high-income households tend to pay higher unit costs for items because they are more likely to purchase higher quality items or shop at premium stores. However, because of bulk discounts, I am likely underestimating their actual realized increase in quality or shopping amenities.  -->

<!-- In order to separately identify these factors, I decompose the unit price of each product module into store, brand, and size components using a hedonic regression. The contribution of each component is then aggregated up to the household level based on that module's basket share and these are aggregated across households using Nielsen's projection weights. The hedonic regression is shown in Equation \ref{eq:hedonic}. -->
<!-- \begin{equation} -->
<!-- \label{eq:hedonic} -->
<!-- unitPrice^m_{brq} = \lambda_b + \lambda_r + \lambda_q + \epsilon_{brq} -->
<!-- \end{equation} -->
<!-- The hedonic regression decomposes the unit price of a product purchased in module $m$ of brand $b$ at retailer $r$ in size quintile $q$ into brand, retailer, and size components. All coefficients are relative to the reference category which is the second-smallest generic brand product sold at the most popular discount retailer. -->

<!-- Figure \ref{fig:unitCostGap} illustrates that unit prices are increasing in income and the increase is larger for storable items. The "reference" basket is a basket composed of all generic brands sold at a discount store in the 2nd-smallest quintile of the size distribution. For illustration, this basket would include items like a 14oz box of cereal, a half-gallon of milk, a 12oz bag of coffee, an 8-pack of toilet paper, and a 2-pack of paper towels. Relative to this reference basket, low income households spend about 8\% more than the reference basket for perishable items and about 48\% more than this basket for non-perishable items. This underestimation increases with income so that high-income households spend 18\% more on perishable items and 66\% more on non-perishable items. -->

<!-- \begin{figure} -->
<!-- \centering -->
<!-- \includegraphics{../5_figures/unitCostGap.png} -->
<!-- \caption{} -->
<!-- \label{fig:unitCostGap} -->
<!-- \end{figure} -->

<!-- Without bulk discounts (i.e. linear pricing), then these unit price differences should be attributed to increased product quality and possibly increased store amenities. However, accounting for bulk discounts reveals that they offset expected unit price increases attributable to brand and store quality by about 10\%. -->

<!-- Figure \ref{fig:priceDecomp} shows that the contribution of brand and retailer components increase the price for high-income households, but that size components offset a large portion of this increase. Most importantly, the figure illustrates the large importance of size components in determining an item's unit costs. -->

<!-- \begin{figure} -->
<!-- \centering -->
<!-- \includegraphics{../5_figures/priceDecomp2.png} -->
<!-- \caption{} -->
<!-- \label{fig:priceDecomp} -->
<!-- \end{figure} -->

The Nielsen Consumer Panel records information on individual purchases made by households. For each household, I compute the total volume and number of packages purchased over the year for each product category. Dividing the total volume by the number of packages gives the average package size purchased by that household. For example, if a household purchased 20 rolls of toilet paper across 2 packages, then the average package size purchased is 10 rolls per package. Therefore, I have the average package size purchased for each household-year-product category. To establish that high income is associated with larger average packages, I estimate the following regression for each product category:

\begin{equation}
log(Y)_{im} = \beta_1 Income_{im} + \beta_2 X_{im} + \lambda_{m} + \epsilon_{im},
\end{equation}

where $Y$ is the average package size purchased by household $i$ in market $m$. I define a market as a DMA-year.^[DMAs are non-overlapping groups of counties that define television markets, but they also provide reasonable sub-MSA geographic regions for analysis.] $Income$ is the household's income bin. $X$ controls for other household demographics including household size, presence of children, age, and marital status. Finally, to capture changes over time within geographic regions, I include a market fixed effect $\lambda$. 

Each product category gives a set of coefficients. These coefficients are plotted in \ref{fig:discountingBehaviorChannelAll}. For clarity, I only show product categories in which at least 5000 households made a purchase in a year (about 5-10\% of Nielsen households). The figure shows that there are wide differences in average package sizes purchased across a wide variety of products. For paper towels, aluminum foil, and kitchen trash bags, households making over \$100k buy 40\% larger packages than those purchased by households making under \$25k. Furthermore, while standard errors are not shown, they are narrow and differences between income groups are also significant. Households making over \$100k purchase larger packages than those making \$50-100k who in turn purchase larger packages than those making \$25-50k. 

In about 70\% of products, higher income households purchase larger packages. 

\begin{figure}
\centering
\includegraphics{../5_figures/discountingBehaviorChannelAll.png}
\caption{}
\label{fig:discountingBehaviorChannelAll}
\end{figure}
